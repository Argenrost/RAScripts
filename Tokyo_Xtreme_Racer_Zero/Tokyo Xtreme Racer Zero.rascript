// Tokyo Xtreme Racer: Zero
// #ID = 20774

TeamInformation = 
[
    {
        "TeamName": "Rolling Guy", 
        "TeamLeader": "Rolling Guy 1",
        "TeamLeaderID": 0,
        "LastMember": 5
    },
    {
        "TeamName": "Little Gang",
        "TeamLeader": "Happy Run",
        "TeamLeaderID": 6,
        "LastMember": 11
    },
    {
        "TeamName": "SS Limited",
        "TeamLeader": "Old Star",
        "TeamLeaderID": 12,
        "LastMember": 19
    },
    {
        "TeamName": "Knife and Forks",
        "TeamLeader": "Invincible Dinner",
        "TeamLeaderID": 20,
        "LastMember": 26
    },
    {
        "TeamName": "Black Knights",
        "TeamLeader": "Sword of Dragon",
        "TeamLeaderID": 27,
        "LastMember": 33
    },
    {
        "TeamName": "Fine Drive",
        "TeamLeader": "Red Meteor",
        "TeamLeaderID": 34,
        "LastMember": 41
    },
    {
        "TeamName": "RATT",
        "TeamLeader": "Flying Sasuke",
        "TeamLeaderID": 42,
        "LastMember": 47
    },
    {
        "TeamName": "Queen's Paradise",
        "TeamLeader": "Shocking Joe",
        "TeamLeaderID": 48,
        "LastMember": 54
    },
    {
        "TeamName": "RINGS",
        "TeamLeader": "Lonely Jackal",
        "TeamLeaderID": 55,
        "LastMember": 62
    },
    {
        "TeamName": "Curving Edge",
        "TeamLeader": "Highway Prince",
        "TeamLeaderID": 63,
        "LastMember": 68
    },
    {
        "TeamName": "Galaxy Racers",
        "TeamLeader": "Mr. Firm",
        "TeamLeaderID": 69,
        "LastMember": 74
    },
    {
        "TeamName": "Max Racing",
        "TeamLeader": "Bloody Rose",
        "TeamLeaderID": 75,
        "LastMember": 82
    },
    {
        "TeamName": "Elegant Wild",
        "TeamLeader": "300 Mile Red Ruby",
        "TeamLeaderID": 83,
        "LastMember": 88
    },
    {
        "TeamName": "Departures",
        "TeamLeader": "Happy Chappy",
        "TeamLeaderID": 89,
        "LastMember": 95
    },
    {
        "TeamName": "Twister",
        "TeamLeader": "Burning Mirage",
        "TeamLeaderID": 96,
        "LastMember": 102
    },
    {
        "TeamName": "Catz",
        "TeamLeader": "Fire Revenge",
        "TeamLeaderID": 103,
        "LastMember": 109
    },
    {
        "TeamName": "The Road of Justice",
        "TeamLeader": "Hearing Master",
        "TeamLeaderID": 110,
        "LastMember": 116
    },
    {
        "TeamName": "Diamond Image",
        "TeamLeader": "Thunder Shift",
        "TeamLeaderID": 117,
        "LastMember": 122
    },
    {
        "TeamName": "Rhythm Box",
        "TeamLeader": "Hip Hop Red",
        "TeamLeaderID": 123,
        "LastMember": 128
    },
    {
        "TeamName": "Wind Stars",
        "TeamLeader": "Requiem",
        "TeamLeaderID": 129,
        "LastMember": 136
    },
    {
        "TeamName": "Harmonize",
        "TeamLeader": "Visual Driver",
        "TeamLeaderID": 137,
        "LastMember": 143
    },
    {
        "TeamName": "Super Speed Wagon",
        "TeamLeader": "Revolution",
        "TeamLeaderID": 144,
        "LastMember": 149
    },
    {
        "TeamName": "Another Star",
        "TeamLeader": "Blue Speed",
        "TeamLeaderID": 150,
        "LastMember": 156
    },
    {
        "TeamName": "Gesellschaft",
        "TeamLeader": "Time is Money",
        "TeamLeaderID": 157,
        "LastMember": 162
    },
    {
        "TeamName": "Explosion",
        "TeamLeader": "Wind Blade",
        "TeamLeaderID": 163,
        "LastMember": 168
    },
    {
        "TeamName": "Highway Outlaw",
        "TeamLeader": "Spirit Crasher",
        "TeamLeaderID": 169,
        "LastMember": 175
    },
    {
        "TeamName": "R.Gangs",
        "TeamLeader": "Drift Dancer",
        "TeamLeaderID": 176,
        "LastMember": 182
    },
    {
        "TeamName": "Cupid Arrows",
        "TeamLeader": "Sonic Runner",
        "TeamLeaderID": 183,
        "LastMember": 188
    },
    {
        "TeamName": "Tokio Jungle",
        "TeamLeader": "Ion",
        "TeamLeaderID": 189,
        "LastMember": 195
    },
    {
        "TeamName": "TR Racing",
        "TeamLeader": "Unstoppable Dream",
        "TeamLeaderID": 196,
        "LastMember": 202
    },
    {
        "TeamName": "Top Level",
        "TeamLeader": "Car Maniac",
        "TeamLeaderID": 203,
        "LastMember": 209
    },
    {
        "TeamName": "Free Way",
        "TeamLeader": "Blue Meteor",
        "TeamLeaderID": 210,
        "LastMember": 218
    },
    {
        "TeamName": "Dry Cruise",
        "TeamLeader": "Tobby",
        "TeamLeaderID": 219,
        "LastMember": 225
    },
    {
        "TeamName": "E.R.O.",
        "TeamLeader": "Mr. Terminate",
        "TeamLeaderID": 226,
        "LastMember": 232
    },
    {
        "TeamName": "Team Alpha",
        "TeamLeader": "Texas' White Wolf",
        "TeamLeaderID": 233,
        "LastMember": 238
    },
    {
        "TeamName": "True Ride",
        "TeamLeader": "A+ Driver",
        "TeamLeaderID": 239,
        "LastMember": 246
    },
    {
        "TeamName": "Unlimited",
        "TeamLeader": "Killing Machine",
        "TeamLeaderID": 247,
        "LastMember": 253
    },
    {
        "TeamName": "R.R.",
        "TeamLeader": "Silver Prince",
        "TeamLeaderID": 254,
        "LastMember": 261
    },
    {
        "TeamName": "Thunder Dragoon",
        "TeamLeader": "Black Dragon",
        "TeamLeaderID": 262,
        "LastMember": 268
    },
    {
        "TeamName": "Abflug SRT",
        "TeamLeader": "Abf911",
        "TeamLeaderID": 269,
        "LastMember": 273
    },
    {
        "TeamName": "Commander",
        "TeamLeader": "Speed Runner",
        "TeamLeaderID": 274,
        "LastMember": 281
    },
    {
        "TeamName": "Double Mind",
        "TeamLeader": "Yellow Voltage",
        "TeamLeaderID": 282,
        "LastMember": 288
    },
    {
        "TeamName": "APS",
        "TeamLeader": "Jamz",
        "TeamLeaderID": 289,
        "LastMember": 295
    },
    {
        "TeamName": "Fanatic Future",
        "TeamLeader": "Burning Leader",
        "TeamLeaderID": 296,
        "LastMember": 302
    },
    {
        "TeamName": "Speed Master",
        "TeamLeader": "Iceman",
        "TeamLeaderID": 303,
        "LastMember": 312
    }
]


Wanderers = 
[
    {
        "WandererName": "Lightning",
        "WandererID": 313
    },
    {
        "WandererName": "White Panther",
        "WandererID": 314
    },
    {
        "WandererName": "Garage Door",
        "WandererID": 315
    },
    {
        "WandererName": "Speed Drinker",
        "WandererID": 316
    },
    {
        "WandererName": "Lonely Wolf",
        "WandererID": 317
    },
    {
        "WandererName": "Steam Storm",
        "WandererID": 318
    },
    {
        "WandererName": "Invincible Artist",
        "WandererID": 319
    },
    {
        "WandererName": "Lost Freak",
        "WandererID": 320
    },
    {
        "WandererName": "Bloody Mary",
        "WandererID": 321
    },
    {
        "WandererName": "Illusion B",
        "WandererID": 322
    },
    {
        "WandererName": "Caffeine Addict",
        "WandererID": 323
    },
    {
        "WandererName": "Magazine Freak",
        "WandererID": 324
    },
    {
        "WandererName": "Machine of Inferno",
        "WandererID": 325
    },
    {
        "WandererName": "Anguish Barbarian",
        "WandererID": 326
    },
    {
        "WandererName": "Waist Master",
        "WandererID": 327
    },
    {
        "WandererName": "Master Position",
        "WandererID": 328
    },
    {
        "WandererName": "Pretty Affair",
        "WandererID": 329
    },
    {
        "WandererName": "Devil Driver",
        "WandererID": 330
    },
    {
        "WandererName": "Street Gambler",
        "WandererID": 331
    },
    {
        "WandererName": "Green Wild",
        "WandererID": 332
    },
    {
        "WandererName": "Dark Desperado",
        "WandererID": 333
    },
    {
        "WandererName": "Eternity",
        "WandererID": 334
    },
    {
        "WandererName": "Mosquito Lemon",
        "WandererID": 335
    },
    {
        "WandererName": "Fearful Princess",
        "WandererID": 336
    },
    {
        "WandererName": "Dumb yet Smart",
        "WandererID": 337
    },
    {
        "WandererName": "Wild Heart",
        "WandererID": 338
    },
    {
        "WandererName": "Road Master",
        "WandererID": 339
    },
    {
        "WandererName": "Glamour Girl",
        "WandererID": 340
    },
    {
        "WandererName": "God Year",
        "WandererID": 341
    },
    {
        "WandererName": "Raspberry Kiss",
        "WandererID": 342
    },
    {
        "WandererName": "Craft Man",
        "WandererID": 343
    },
    {
        "WandererName": "Cutie Pie",
        "WandererID": 344
    },
    {
        "WandererName": "Storm Screamer",
        "WandererID": 345
    },
    {
        "WandererName": "Uncrushable Alexander",
        "WandererID": 346
    },
    {
        "WandererName": "Silver Ruler",
        "WandererID": 347
    },
    {
        "WandererName": "Night Wolf",
        "WandererID": 348
    },
    {
        "WandererName": "Max Energy",
        "WandererID": 349
    },
    {
        "WandererName": "Jet Skater",
        "WandererID": 350
    },
    {
        "WandererName": "Crying Baby",
        "WandererID": 351
    },
    {
        "WandererName": "Tomorrow Again",
        "WandererID": 352
    },
    {
        "WandererName": "Healthy Hero",
        "WandererID": 353
    },
    {
        "WandererName": "Late Night Cinderella",
        "WandererID": 354
    },
    {
        "WandererName": "Unbalanced Heart",
        "WandererID": 355
    },
    {
        "WandererName": "Toll Free",
        "WandererID": 356
    },
    {
        "WandererName": "Madness",
        "WandererID": 357
    },
    {
        "WandererName": "Technician Guy",
        "WandererID": 358
    },
    {
        "WandererName": "Fast Phobe",
        "WandererID": 359
    },
    {
        "WandererName": "ZERO",
        "WandererID": 360
    },
    {
        "WandererName": "SPEED BOX",
        "WandererID": 361
    },
    {
        "WandererName": "Mask",
        "WandererID": 362
    },
    {
        "WandererName": "Windy Fanfare",
        "WandererID": 363
    },
    {
        "WandererName": "Start Dash",
        "WandererID": 364
    },
    {
        "WandererName": "Golden License",
        "WandererID": 365
    },
    {
        "WandererName": "Iron Racer",
        "WandererID": 366
    },
    {
        "WandererName": "Exotic Butterfly",
        "WandererID": 367
    },
    {
        "WandererName": "King of Eden",
        "WandererID": 368
    },
    {
        "WandererName": "Loyal Knight",
        "WandererID": 369
    },
    {
        "WandererName": "Gentle Rain",
        "WandererID": 370
    },
    {
        "WandererName": "Last Flight",
        "WandererID": 371
    },
    {
        "WandererName": "Silent Barbarian",
        "WandererID": 372
    }
]

EliteMembers = 
[
    {
        "EliteName": "Traitor Jack knife",
        "EliteID": 373
    },
    {
        "EliteName": "True Slide",
        "EliteID": 374
    },
    {
        "EliteName": "Unhappy Angel",
        "EliteID": 375
    },
    {
        "EliteName": "Hard Weapon",
        "EliteID": 376
    },
    {
        "EliteName": "Fallen Blade",
        "EliteID": 377
    },
    {
        "EliteName": "Blood Hound",
        "EliteID": 378
    },
    {
        "EliteName": "Dark Producer",
        "EliteID": 379
    },
    {
        "EliteName": "Mr. Sitar",
        "EliteID": 380
    },
    {
        "EliteName": "Iron Heart",
        "EliteID": 381
    },
    {
        "EliteName": "Dying Star",
        "EliteID": 382
    },
    {
        "EliteName": "Dreamy Ghost",
        "EliteID": 383
    },
    {
        "EliteName": "Tail Gunner",
        "EliteID": 384
    },
    {
        "EliteName": "Shadow Eyes",
        "EliteID": 385
    },
    {
        "EliteName": "Speed King",
        "EliteID": 386
    },
    {
        "EliteName": "Midnight Rose",
        "EliteID": 387
    },
    {
        "EliteName": "Golden Wind",
        "EliteID": 388
    },
    {
        "EliteName": "Dark Ringleader",
        "EliteID": 389
    },
    {
        "EliteName": "Hard Lift",
        "EliteID": 390
    },
    {
        "EliteName": "Blue Pressure",
        "EliteID": 391
    },
    {
        "EliteName": "No-Crown King",
        "EliteID": 392
    },
    {
        "EliteName": "Crying Pluto",
        "EliteID": 393
    },
    {
        "EliteName": "Red Devil",
        "EliteID": 394
    },
    {
        "EliteName": "Queen's Knight",
        "EliteID": 395
    },
    {
        "EliteName": "Purple Meteor",
        "EliteID": 396
    },
    {
        "EliteName": "Exotic Eve",
        "EliteID": 397
    },
    {
        "EliteName": "White Charisma",
        "EliteID": 398
    },
    {
        "EliteName": "Unknown",
        "EliteID": 399
    }

]

TOTAL_ENEMIES = 400

// $274270: (32-bytes)The player's current car's configuration.
//          
//          Possibly bigger than 32 bytes.
//          
//          See 0x00309620 for information on each value,  (technically starting at 0x00309634)
function inGameCarConfiguration() => byte(0x274270)

// $305670: (8-bit) Current Car Class In Game
// 
//          Changes based on what car class you're driving 
//
//          Appears to work for Front end even with out the Car Shop./ 
//
//          Works in Time Trial
//
//          0x00 = A Class
//          0x01 = B Class
//          0x02 = C Class.
function inGameCarClass() => byte(0x305670)

CLASS_A = 0x00
CLASS_B = 0x01
CLASS_C = 0x02

// $305674: (16-bit array) Class A Car indexes
//          
//          Number of cars at 0x0030b560
//          
//          Additional car information at 0x003057a0
//          
//          You can use https://gamefaqs.gamespot.com/ps2/448657-tokyo-xtreme-racer-zero/faqs/11886 to look up the correct names for these.
//          0x00 = AE86L3
//          0x01 = AE86T3
//          0x02 = AE86L2
//          0x03 = AE86T2
//          0x04 = SW20GT
//          0x05 = SW20G
//          0x06 = A80RZ
//          0x07 = A80SZ
//          0x08 = A80RZM
//          0x09 = A80SZM
//          0x0a = XE10RS
//          0x0b = XE10AS
//          0x0c = 100TV
//          0x0d = 100TVM
//          0x0e = 100MV
//          0x0f = 100MVM
//          0x10 = S13K
//          0x11 = S13Q
//          0x12 = PS13K
//          0x13 = PS13Q
//          0x14 = PS13KK
//          0x15 = S14K
//          0x16 = S14Q
//          0x17 = S14KM
//          0x18 = S14QM
//          0x19 = S15R
//          0x1a = S15S
//          0x1b = RPS13X
//          0x1c = RPS133
//          0x1d = R32RV2
//          0x1e = R32RN
//          0x1f = R32GTM
//          0x20 = R33RV
//          0x21 = R33RVM
//          0x22 = R34RV
//          0x23 = R34RVM
//          0x24 = R34GT
//          0x25 = R34GTM
//          0x26 = Z32VS
//          0x27 = Z32ZX
//          0x28 = Y33CV
//          0x29 = Y33GTU
//          0x2a = QX7
//          0x2b = QX7A
//          0x2c = QW
//          0x2d = MH5
//          0x2e = MH8
//          0x2f = ML3
//          0x30 = ML5
//          0x31 = RPT6
//          0x32 = RPT7
//          0x33 = CE9A
//          0x34 = CN9A
//          0x35 = CP9A5
//          0x36 = CP9A6
//          0x37 = CP9A6M
//          0x38 = FC3E3
//          0x39 = FC3X
//          0x3a = FD3RS
//          0x3b = FD3RZ
//          0x3c = GC8K
//          0x3d = GC8S4
//          0x3e = GC8C4
//          0x3f = GC8S5
//          0x40 = GC8C5
//          0x41 = GC8S6
//          0x42 = GC8C6
//          0x43 = GF8W4
//          0x44 = GF8W5
//          0x45 = GF8W6
//          0x46 = JS4
//          0x47 = JS4L
//          0x48 = 964T
//          0x49 = 964C2
//          0x4a = S30Z
//          0x4b = S30Z6
//          0x4c = AE111RL
//          0x4d = AE111RT
//          0x4e = UZZ30
//          0x4f = JZZ30
//          0x50 = NB8RS
//          0x51 = NB8RSM
//          0x52 = QW3
//          0x53 = ST205
//          0x54 = ST202
//          0x55 = Z15AM
//          0x56 = Z15A
//          0x57 = Z16A
//          0x58 = DE3A
//          0x59 = N15N1
//          0x5a = BE5
//          0x5b = BH5B
//          0x5c = T231
//          0x5d = W30
//          0x5e = Y34CV
//          0x5f = Y34GU
//          0x60 = E36
//          0x61 = N5S16M
//          0x62 = N5S16
//          0x63 = C34M
//          0x64 = C34
//          0x65 = S161V
//          0x66 = S161VM
//          0x67 = ML11
//          0x68 = ML11C
//          0x69 = 4K1
//          0x6a = 4E1
//          0x6b = YT1
//          0x6c = PG6SA
//          0x6d = EA11R
//          0x6e = EA21R
//          0x6f = JCESE
//          0x70 = A31C
//          0x71 = RF2
//          0x72 = A187
//          0x73 = RX3
//          0x74 = KPGC10
//          0x75 = R30M
//          0x76 = R30
//          0x77 = SAGTX
//          0x78 = VGTS
//          0x79 = S30ZX
//          0x7a = 4BV
//          0x7b = 4BU
//          0x7c = D32AGS
//          0x7d = ECGT
//          0x7e = 089G
//          0x7f = NCP35
//          0x80 = UCF308
//          0x81 = A70GTA
//          0x82 = A70TTR
//          0x83 = CT9A
//          0x84 = TAGDA
//          0x85 = TASTI
//          0x86 = CBAEP
//          0x87 = 100TVK
//          0x88 = JS4X
//          0x89 = JZZ30K
//          0x8a = Z15AMK
//          0x8b = RPT7B
//          0x8c = A70GTK
//          0x8d = R34RKK
//          0x8e = Y34GUK
//          0x8f = UZZ30K
//          0x90 = R34RK
//          0x91 = Z32VSK
//          0x92 = A80RZK
//          0x93 = FD3RK
//          0x94 = NCP35K
//          0x95 = S15RK
//          0x96 = R33RK
//          0x97 = FD3RKK
//          0x98 = S13KKK
//          0x99 = Z32ZXK
//          0x9a = S14KMK
//          0x9b = Y33CVK
//          0x9c = S161VK
//          0x9d = A80RK
//          0x9e = FC3E3K
//          0x9f = Z16AK
//          0xa0 = RPT6B
//          0xa1 = PS13XK
//          0xa2 = S15RKK
//          0xa3 = JCESEK
//          0xa4 = R32RNK
//          NOTE: After this is cars normally not purchasable.
//          0xa5 = YXS10
//          0xa6 = WHR69
//          0xa7 = EE98V
//          0xa8 = NKR58E
//          0xa9 = FV
//          0xaa = EE98VS
//          0xab = NKR585
//          0xac = NKR58R
//          0xad = SCP10
//          0xae = RA9
//          0xaf = CHRT
//          Note: Values over 0xb0 appears to cause the game to have issues.
function classACarIndexes() => word(0x305674)

AE86L3 = 0x00 
AE86T3 = 0x01
AE86L2 = 0x02
AE86T2 = 0x03



// $3056D8: (16-bit array) Class B Car indexes
//          
//          Number of cars at 0x0030b562
//          
//          Additional car information at 0x003076e0
//          
//          Check 0x00305674 for meaning of each index
function classBCarIndexes() => word(0x3056D8)

// $30573C: (16-bit array) Class C Car indexes
//          
//          Number of cars at 0x0030b564
//          
//          Additional car information at 0x00309620
//          
//          Check 0x00305674 for meaning of each index
function classCCarIndexes() => word(0x30573C)

// $3057A0: This begins the array of Class A owned cars.  Note cars get shuffled around, if you sell the first car, all cars move up a slot.
//          
//          The number of car's owned (And thus size of the array is located at 0x0030b563
//          
//          Cars appear to be 160 bytes wide.
//          
//          There appears to be 32 slots.
function classAArray() => byte(0x3057A0)

// $3076E0: This begins the array of Class B owned cars.  Note cars get shuffled around, if you sell the first car, all cars move up a slot.
//          
//          The number of car's owned (And thus size of the array is located at 0x0030b562
//          
//          Cars appear to be 160 bytes wide.
//          
//          There appears to be 32 slots.
function classBArray() => byte(0x3076E0)

// $309620: (Array of 50 160-byte values) Class C Cars
//          
//          This begins the array of Class C owned cars.  Note cars get shuffled around, if you sell the first car, all cars move up a slot.
//          
//          The number of car's owned (And thus size of the array is located at 0x0030b564
//          
//          
//          There appears to be 32 slots.
function classCArray() => byte(0x309620)

// $309621: (Ascii Text)  1st class C car slot name in Ascii format.
//          
//          Up to 16 characters. Null terminated.  Adding extra characters cause them to be represented.
//          
//          Note, not true ascii, some additional characters are added, and some hidden characters exist (ff = small c like in copyright)
function classC1stCarName() => byte(0x309621)

// $309634: (16-bit) 1st class C car equipped sticker index
//          
//          0xffff = normal.
//          0x2 = Fast and furious
//          0x3 = Genki
//          0x4 = HMS
//          
//          Negligable change.  Likely the original number
function classC1stCarSticker() => word(0x309634)

// $3096B8: (32-bit) Distance traveled in car
//          
//          Controls a number of unlocks.
function classC1stCarDistanceTraveled() => dword(0x3096B8)

// $30B560: (16-bit) Number of Class A cars Owned
//          
//          Note: These also sum up to the "owned cars" in the player's record.
//          
//          Max of 50 cars total between Class A, Class B, and Class C
function classACarsOwned() => word(0x30B560)

// $30B562: (16-bit) Number of Class B cars Owned
//          
//          Note: These also sum up to the "owned cars" in the player's record.
//          
//          Max of 50 cars total between Class A, Class B, and Class C
function classBCarsOwned() => word(0x30B562)

// $30B564: (16-bit) Number of Class C cars Owned
//          
//          Note: These also sum up to the "owned cars" in the player's record.
//          
//          Max of 50 cars total between Class A, Class B, and Class C
function classCCarsOwned() => word(0x30B564)

// $3115A4: (32-bit) Previous Races won in quest mode
//          
//          This is set as you enter Quest mode and used on the post race screen to calculate the delta.
//          
//          Previous Wins is located at 0x003115a4
function questModePrevRacesWon() => dword(0x3115A4)

// $3115A8: (32-bit) Previous Races lost in quest mode
//          
//          This is set as you enter Quest mode and used on the post race screen to calculate the delta.
function questModePrevRacesLost() => dword(0x3115A8)

// $3115AC: (32-bit) Previous Races drawn in quest mode
//          
//          This is set as you enter Quest mode and used on the post race screen to calculate the delta.
function questModePrevRacesDrawn() => dword(0x3115AC)

// $375944: (32-bit)  Rear View Hanging model
//          
//          0xfffffff = No "Decoration"
//          0x00 = Toothy monster
//          0x01 = Pink Creature
//          0x02 = Blue Creature
//          0x03 = Green Monster Chungus
function mirrorHanger() => dword(0x375944)

NO_MIRROR_HANGER = 0xffffffff
function hasMirrorHanger() => mirrorHanger() != NO_MIRROR_HANGER

// $375C0C: (16-bit) Car Index while driving
//          
//          Similar to 0x0375c0c, 0x37dc3c and 0x742b6e
//          
//          See 0x00305674 for car index.
function inGameCarIndex() => word(0x375C0C)

function drivingAE86() => inGameCarIndex() == AE86L2 ||
                          inGameCarIndex() == AE86L3 ||
                          inGameCarIndex() == AE86T2 ||
                          inGameCarIndex() == AE86T3

// $37DC50: (Float) Displayed value of Max Speed at end of night.
//          
//          Starts at 0, and increases.  This gets multiplied by 3.6 and then multiplied by .6 (To convert to Mph?)
function endOfNightMaxSpeed() => float(0x37DC50)

function maxSpeedInMPH(speed) => endOfNightMaxSpeed() * 3.6 * 0.6

// $37DC60: (32-bit) In game Total Odometer Value per car.
//          
//          Not related to unlocks.
function inGameTotalOdometer() => dword(0x37DC60)

// $37DCA5: [408-bit]  Off by 1 array note.  List of all Rival who has beaten the player.
//          
//          Does not appear to get cleared when winning.  However beating the enemy with out losing will not set this. .
//          
//          Just a few key words.  Won, Beaten, win.
//          
//          Values (NOTE This is 1-index, due to how it is in game, it maybe be 0-index in game.
//          1=Rolling Guy 1 (Rolling Guy Leader)
//          2=Rolling Guy 2 (Rolling Guy 1)
//          3=Rolling Guy 3 (Rolling Guy 2)
//          4=Rolling Guy 4 (Rolling Guy 3)
//          5=Rolling Guy 5 (Rolling Guy 4)
//          6=Rolling Guy 6 (Rolling Guy 5)
//          7=Happy Run (Little Gang Leader)
//          8=Kiss My Bumper (Little Gang 1)
//          9=Talking Head (Little Gang 2)
//          10=Mr. Thanks (Little Gang 3)
//          11=Spring Bird (Little Gang 4)
//          12=Lazy Butt (Little Gang 5)
//          13=Old Star (SS Limited Leader)
//          14=Heaven's Door (SS Limited 1)
//          15=Black Rain (SS Limited 2)
//          16=Red Thunder (SS Limited 3)
//          17=Sports Killer (SS Limited 4)
//          18=New Star (SS Limited 5)
//          19=Chemistry (SS Limited 6)
//          20=Excite Carmine (SS Limited 7)
//          21=Invincible Dinner (Knife and Forks Leader)
//          22=Table Manner (Knife and Forks 1)
//          23=Street Wine (Knife and Forks 2)
//          24=Golden Cream Soup (Knife and Forks 3)
//          25=Midnight � la Mode (Knife and Forks 4)
//          26=4 Star Driver (Knife and Forks 5)
//          27=Red Table Cloth (Knife and Forks 6)
//          28=Sword of Dragon (Black Knights Leader)
//          29=Dark Varlet (Black Knights 1)
//          30=Dark Killer (Black Knights 2)
//          31=Dark Eyes (Black Knights 3)
//          32=Dark Crow (Black Knights 4)
//          33=Dark Cloud (Black Knights 5)
//          34=Dark Miracle (Black Knights 6)
//          35=Red Meteor (Fine Drive Leader)
//          36=Sylvester (Fine Drive 1)
//          37=Hell's Drifter (Fine Drive 2)
//          38=King of 2000cc (Fine Drive 3)
//          39=Drift King (Fine Drive 4)
//          40=Funky Monkey (Fine Drive 5)
//          41=Natural Soldier (Fine Drive 6)
//          42=Fire Bird (Fine Drive 7)
//          43=Flying Sasuke (RATT Leader)
//          44=Red Shadow (RATT 1)
//          45=Thunder Bird (RATT 2)
//          46=Rental Driver (RATT 3)
//          47=Gamer Racer (RATT 4)
//          48=Drift Queen (RATT 5)
//          49=Shocking Joe (Queen's Paradise Leader)
//          50=Sunday Driver (Queen's Paradise 1)
//          51=Balalaika Man (Queen's Paradise 2)
//          52=Chopper (Queen's Paradise 3)
//          53=Lucky Guy (Queen's Paradise 4)
//          54=Ballad (Queen's Paradise 5)
//          55=Mr. Mystery (Queen's Paradise 6)
//          56=Lonely Jackal (RINGS Leader)
//          57=Shocking Slide Tail (RINGS 1)
//          58=Meteor (RINGS 2)
//          59=Tune Up Junky (RINGS 3)
//          60=Silver Angel (RINGS 4)
//          61=White Devil (RINGS 5)
//          62=Flume (RINGS 6)
//          63=Myna Bird (RINGS 7)
//          64=Highway Prince (Curving Edge Leader)
//          65=Mr. Fire (Curving Edge 1)
//          66=Wind of Night (Curving Edge 2)
//          67=Professor Robledo (Curving Edge 3)
//          68=Thunder Flare (Curving Edge 4)
//          69=Road Killer (Curving Edge 5)
//          70=Mr. Firm (Galaxy Racers Leader)
//          71=Broken Arrow (Galaxy Racers 1)
//          72=Lovely Erotica (Galaxy Racers 2)
//          73=Mr. Othello (Galaxy Racers 3)
//          74=Sweet Honey (Galaxy Racers 4)
//          75=Sabrina (Galaxy Racers 5)
//          76=Bloody Rose (Max Racing Leader)
//          77=Golden Beast (Max Racing 1)
//          78=Crazy Hooligan (Max Racing 2)
//          79=Blue Shadow (Max Racing 3)
//          80=Dark Panther (Max Racing 4)
//          81=High Speed Blue Thunder (Max Racing 5)
//          82=High Speed White Blade (Max Racing 6)
//          83=High Speed Blood Rain (Max Racing 7)
//          84=300 Mile Red Ruby (Elegant Wild Leader)
//          85=Deep Green (Elegant Wild 1)
//          86=White Revolution (Elegant Wild 2)
//          87=Hostman Hut (Elegant Wild 3)
//          88=Black Cinderella (Elegant Wild 4)
//          89=Unfinish Yellow (Elegant Wild 5)
//          90=Happy Chappy (Departures Leader)
//          91=Night Killer (Departures 1)
//          92=Sweet Surrender (Departures 2)
//          93=Cool Sight (Departures 3)
//          94=Great Finance (Departures 4)
//          95=Up Beat (Departures 5)
//          96=Crystal Prince (Departures 6)
//          97=Burning Mirage (Twister Leader)
//          98=Smile (Twister 1)
//          99=Sweet Blues (Twister 2)
//          100=Blue Writer (Twister 3)
//          101=Shooting Star (Twister 4)
//          102=Baron (Twister 5)
//          103=Rainy Day (Twister 6)
//          104=Fire Revenge (Catz Leader)
//          105=Dark Mist (Catz 1)
//          106=Highway Wall (Catz 2)
//          107=Wine Chase (Catz 3)
//          108=Firefighter (Catz 4)
//          109=Fire Driver (Catz 5)
//          110=Unlucky Duke (Catz 6)
//          111=Hearing Master (The Road of Justice Leader)
//          112=Highway Magician (The Road of Justice 1)
//          113=Fighting Master (The Road of Justice 2)
//          114=Wall Street (The Road of Justice 3)
//          115=Flame Canon (The Road of Justice 4)
//          116=Shining (The Road of Justice 5)
//          117=Happy Camper (The Road of Justice 6)
//          118=Thunder Shift (Diamond Image Leader)
//          119=Lone Wolf (Diamond Image 1)
//          120=Spring Rain (Diamond Image 2)
//          121=Silver Bullet (Diamond Image 3)
//          122=Troubleshooter (Diamond Image 4)
//          123=Yellow Angel (Diamond Image 5)
//          124=Hip Hop Red (Rhythm Box Leader)
//          125=Jazz Green (Rhythm Box 1)
//          126=Classical Blue (Rhythm Box 2)
//          127=Stormy Calligrapher (Rhythm Box 3)
//          128=Pink Groove (Rhythm Box 4)
//          129=Midnight Blue (Rhythm Box 5)
//          130=Requiem (Wind Stars Leader)
//          131=R Magic (Wind Stars 1)
//          132=Diamond Dust (Wind Stars 2)
//          133=Yellow Flare (Wind Stars 3)
//          134=Mad Train (Wind Stars 4)
//          135=Speedy Valkyrie (Wind Stars 5)
//          136=Blue Star (Wind Stars 6)
//          137=Moody Queen (Wind Stars 7)
//          138=Visual Driver (Harmonize Leader)
//          139=Curve Block (Harmonize 1)
//          140=Highway Silver Arrow (Harmonize 2)
//          141=Aero Star (Harmonize 3)
//          142=Water Drift (Harmonize 4)
//          143=Brand New Thunder (Harmonize 5)
//          144=Dream Light (Harmonize 6)
//          145=Revolution (Super Speed Wagon Leader)
//          146=Magical (Super Speed Wagon 1)
//          147=Belly-ache (Super Speed Wagon 2)
//          148=Fruit Basket (Super Speed Wagon 3)
//          149=Jumping (Super Speed Wagon 4)
//          150=Shuffle (Super Speed Wagon 5)
//          151=Blue Speed (Another Star Leader)
//          152=Silver Speed (Another Star 1)
//          153=Lightning Bird (Another Star 2)
//          154=Red Shut (Another Star 3)
//          155=Battle Scratch (Another Star 4)
//          156=Lightning Eyes (Another Star 5)
//          157=U Violet (Another Star 6)
//          158=Time is Money (Gesellschaft Leader)
//          159=Lost Kid (Gesellschaft 1)
//          160=Lone Survivor (Gesellschaft 2)
//          161=Cool Guy (Gesellschaft 3)
//          162=Happy Extreme (Gesellschaft 4)
//          163=Angry Princess (Gesellschaft 5)
//          164=Wind Blade (Explosion Leader)
//          165=Golden Fang (Explosion 1)
//          166=Trouble Maker (Explosion 2)
//          167=Silent Sense (Explosion 3)
//          168=Blue Phoenix (Explosion 4)
//          169=Through Dog (Explosion 5)
//          170=Spirit Crasher (Highway Outlaw Leader)
//          171=Pride Killer (Highway Outlaw 1)
//          172=Cold Prince (Highway Outlaw 2)
//          173=Mad Driver (Highway Outlaw 3)
//          174=Driving Sir (Highway Outlaw 4)
//          175=Totem Pole (Highway Outlaw 5)
//          176=Spiral (Highway Outlaw 6)
//          177=Drift Dancer (R.Gangs Leader)
//          178=Street Dancer (R.Gangs 1)
//          179=Hell's Bartender (R.Gangs 2)
//          180=Professor Speedy (R.Gangs 3)
//          181=Wind Impala (R.Gangs 4)
//          182=Black Mirage (R.Gangs 5)
//          183=Rain Drop (R.Gangs 6)
//          184=Sonic Runner (Cupid Arrows Leader)
//          185=Mysterious Nymph (Cupid Arrows 1)
//          186=Moon Light Child (Cupid Arrows 2)
//          187=Cowboy Girl (Cupid Arrows 3)
//          188=Silver Impact (Cupid Arrows 4)
//          189=246 Heart Breaker (Cupid Arrows 5)
//          190=Ion (Tokio Jungle Leader)
//          191=MJ6feet6 (Tokio Jungle 1)
//          192=Black Wind (Tokio Jungle 2)
//          193=White Fox (Tokio Jungle 3)
//          194=Salty Dog (Tokio Jungle 4)
//          195=Slide Freek (Tokio Jungle 5)
//          196=Driving Blue Wave (Tokio Jungle 6)
//          197=Unstoppable Dream (TR Racing Leader)
//          198=Lovely Girl (TR Racing 1)
//          199=Rule Breaker (TR Racing 2)
//          200=180 Master (TR Racing 3)
//          201=Dawn Shaker (TR Racing 4)
//          202=Night Worker (TR Racing 5)
//          203=Dancing Chaser (TR Racing 6)
//          204=Car Maniac (Top Level Leader)
//          205=Mystery Girl (Top Level 1)
//          206=Red Tears (Top Level 2)
//          207=Sir General (Top Level 3)
//          208=Legendary Digger (Top Level 4)
//          209=Midnight Through (Top Level 5)
//          210=Russian Blue (Top Level 6)
//          211=Blue Meteor (Free Way Leader)
//          212=Orange Head (Free Way 1)
//          213=Silver Fox (Free Way 2)
//          214=Nightmare (Free Way 3)
//          215=Silent Reviver (Free Way 4)
//          216=Ultimate Killer (Free Way 5)
//          217=Crystal Knight (Free Way 6)
//          218=Speed Junky (Free Way 7)
//          219=Highway Bomber (Free Way 8)
//          220=Tobby (Dry Cruise Leader)
//          221=Midnight Owl (Dry Cruise 1)
//          222=Entrepreneur (Dry Cruise 2)
//          223=Rain Master (Dry Cruise 3)
//          224=Mr. Max (Dry Cruise 4)
//          225=Mr. Muscle (Dry Cruise 5)
//          226=Angel Smile (Dry Cruise 6)
//          227=Mr. Terminate (E.R.O. Leader)
//          228=Non Stop Emotion (E.R.O. 1)
//          229=Brand New Morning (E.R.O. 2)
//          230=Cool B (E.R.O. 3)
//          231=Star Holder (E.R.O. 4)
//          232=Sentimental Flame (E.R.O. 5)
//          233=Strange Devil (E.R.O. 6)
//          234=Texas' White Wolf (Team Alpha Leader)
//          235=Gattling Gun (Team Alpha 1)
//          236=Mike the Horseman (Team Alpha 2)
//          237=Smiling Shadow (Team Alpha 3)
//          238=Rock Spider (Team Alpha 4)
//          239=Code F (Team Alpha 5)
//          240=A+ Driver (True Ride Leader)
//          241=Large Impact (True Ride 1)
//          242=Iron Blocker (True Ride 2)
//          243=Genius Rookie (True Ride 3)
//          244=Wolter Wolf (True Ride 4)
//          245=Pink Lily (True Ride 5)
//          246=Strike Star (True Ride 6)
//          247=Sunny Dragon (True Ride 7)
//          248=Killing Machine (Unlimited Leader)
//          249=Lone MONSTER (Unlimited 1)
//          250=Scotch (Unlimited 2)
//          251=Yesman (Unlimited 3)
//          252=Daimajin (Unlimited 4)
//          253=Spider (Unlimited 5)
//          254=Sleepy Driver (Unlimited 6)
//          255=Silver Prince (R.R. Leader)
//          256=Turning Artist (R.R. 1)
//          257=Asphalt's Cry (R.R. 2)
//          258=HIROSHI (R.R. 3)
//          259=Dark Memory (R.R. 4)
//          260=Risky Cat (R.R. 5)
//          261=Black Bird (R.R. 6)
//          262=High Speed Star (R.R. 7)
//          263=Black Dragon (Thunder Dragoon Leader)
//          264=White Dragon (Thunder Dragoon 1)
//          265=Yellow Dragon (Thunder Dragoon 2)
//          266=Red Dragon (Thunder Dragoon 3)
//          267=Green Dragon (Thunder Dragoon 4)
//          268=Gray Dragon (Thunder Dragoon 5)
//          269=Blue Dragon (Thunder Dragoon 6)
//          270=Abf911 (Abflug SRT Leader)
//          271=Dandy (Abflug SRT 1)
//          272=Superman (Abflug SRT 2)
//          273=Teru (Abflug SRT 3)
//          274=Horse Head (Abflug SRT 4)
//          275=Speed Runner (Commander Leader)
//          276=Mr. Japan (Commander 1)
//          277=Shoe Keeper (Commander 2)
//          278=Weak Arm (Commander 3)
//          279=Girl Hunter (Commander 4)
//          280=Pickle (Commander 5)
//          281=Rainbow Traveler (Commander 6)
//          282=Swimmer (Commander 7)
//          283=Yellow Voltage (Double Mind Leader)
//          284=Dark Labyrinth (Double Mind 1)
//          285=Blood (Double Mind 2)
//          286=Gray Giant (Double Mind 3)
//          287=Brown Giant (Double Mind 4)
//          288=White Angel (Double Mind 5)
//          289=Gray Fairy (Double Mind 6)
//          290=Jamz (APS Leader)
//          291=Blocky Rider (APS 1)
//          292=King (APS 2)
//          293=Revived Wizard (APS 3)
//          294=Shyxgirl (APS 4)
//          295=Double Booking (APS 5)
//          296=New Wind (APS 6)
//          297=Burning Leader (Fanatic Future Leader)
//          298=Cool Looking (Fanatic Future 1)
//          299=Mysterious Driver (Fanatic Future 2)
//          300=Burning General (Fanatic Future 3)
//          301=Intelligent Teacher (Fanatic Future 4)
//          302=Larger than Life (Fanatic Future 5)
//          303=Love Knuckle (Fanatic Future 6)
//          304=Iceman (Speed Master Leader)
//          305=Crazy Moon (Speed Master 1)
//          306=Visual Tail (Speed Master 2)
//          307=Sunset Rider (Speed Master 3)
//          308=White Witch (Speed Master 4)
//          309=Pearl Kiss (Speed Master 5)
//          310=Maniac Player (Speed Master 6)
//          311=Black Angel (Speed Master 7)
//          312=Unknown Hero (Speed Master 8)
//          313=Fast Beat (Speed Master 9)
//          314=Lightning (Wanderers Leader)
//          315=White Panther (Wanderers 1)
//          316=Garage Door (Wanderers 2)
//          317=Speed Drinker (Wanderers 3)
//          318=Lonely Wolf (Wanderers 4)
//          319=Steam Storm (Wanderers 5)
//          320=Invincible Artist (Wanderers 6)
//          321=Lost Freak (Wanderers 7)
//          322=Bloody Mary (Wanderers 8)
//          323=Illusion B (Wanderers 9)
//          324=Caffeine Addict (Wanderers 10)
//          325=Magazine Freak (Wanderers 11)
//          326=Machine of Inferno (Wanderers 12)
//          327=Anguish Barbarian (Wanderers 13)
//          328=Waist Master (Wanderers 14)
//          329=Master Position (Wanderers 15)
//          330=Pretty Affair (Wanderers 16)
//          331=Devil Driver (Wanderers 17)
//          332=Street Gambler (Wanderers 18)
//          333=Green Wild (Wanderers 19)
//          334=Dark Desperado (Wanderers 20)
//          335=Eternity (Wanderers 21)
//          336=Mosquito Lemon (Wanderers 22)
//          337=Fearful Princess (Wanderers 23)
//          338=Dumb yet Smart (Wanderers 24)
//          339=Wild Heart (Wanderers 25)
//          340=Road Master (Wanderers 26)
//          341=Glamour Girl (Wanderers 27)
//          342=God Year (Wanderers 28)
//          343=Raspberry Kiss (Wanderers 29)
//          344=Craft Man (Wanderers 30)
//          345=Cutie Pie (Wanderers 31)
//          346=Storm Screamer (Wanderers 32)
//          347=Uncrushable Alexander (Wanderers 33)
//          348=Silver Ruler (Wanderers 34)
//          349=Night Wolf (Wanderers 35)
//          350=Max Energy (Wanderers 36)
//          351=Jet Skater (Wanderers 37)
//          352=Crying Baby (Wanderers 38)
//          353=Tomorrow Again (Wanderers 39)
//          354=Healthy Hero (Wanderers 40)
//          355=Late Night Cinderella (Wanderers 41)
//          356=Unbalanced Heart (Wanderers 42)
//          357=Toll Free (Wanderers 43)
//          358=Madness (Wanderers 44)
//          359=Technician Guy (Wanderers 45)
//          360=Fast Phobe (Wanderers 46)
//          361=ZERO (Wanderers 47)
//          362=SPEED BOX (Wanderers 48)
//          363=Mask (Wanderers 49)
//          364=Windy Fanfare (Wanderers 50)
//          365=Start Dash (Wanderers 51)
//          366=Golden License (Wanderers 52)
//          367=Iron Racer (Wanderers 53)
//          368=Exotic Butterfly (Wanderers 54)
//          369=King of Eden (Wanderers 55)
//          370=Loyal Knight (Wanderers 56)
//          371=Gentle Rain (Wanderers 57)
//          372=Last Flight (Wanderers 58)
//          373=Silent Barbarian (Wanderers 59)
//          374=Traitor Jack knife  Traitor Jack Knife (13 Devils Leader)
//          375=True Slide True Slide (13 Devils 1)
//          376=Unhappy Angel  Dejected angel (13 Devils 2)
//          377=Hard Weapon Hard Weapon (13 Devils 3)
//          378=Fallen Blade Fallen Blade (13 Devils 4)
//          379=Blood Hound Blood Hound (13 Devils 5)
//          380=Dark Producer  Dark Producer (13 Devils 6)
//          381=Mr. Sitar  Mr. Sitar (13 Devils 7)
//          382=Iron Heart  Iron Heart (13 Devils 8)
//          383=Dying Star Dying Star-0 (13 Devils 9)
//          384=Dreamy Ghost Dreamy Ghost (13 Devils 10)
//          385=Tail Gunner  Tail Gunner (13 Devils 11)
//          386=Shadow Eyes Shadow eyes icon (13 Devils 12)
//          387=Speed King - [S1]  Tim2out571571 (13 Devils 13)
//          388=Midnight Rose Midnight rose icon (The Zodiac Leader)
//          389=Golden Wind  Golden wind icon (The Zodiac 1)
//          390=Dark Ringleader  Dark ringleader icon (The Zodiac 2)
//          391=Hard Lift  Hard lift icon (The Zodiac 3)
//          392=Blue Pressure Blue pressure icon (The Zodiac 4)
//          393=No-Crown King  Nocrown king icon (The Zodiac 5)
//          394=Crying Pluto  Crying pluto icon (The Zodiac 6)
//          395=Red Devil  Red devil icon (The Zodiac 7)
//          396=Queen's Knight Queens knight icon (The Zodiac 8)
//          397=Purple Meteor Purple meteor icon (The Zodiac 9)
//          398=Exotic Eve  Exotic eve (The Zodiac 10)
//          399=White Charisma [S2]  White charisma icon (The Zodiac 11)
//          400=Unknown - [U]  Devilz icon (Final Boss Leader)
function lossesInfoOffByOne() => byte(0x37DCA5)

// $37DCA6: (8-bit) Location for marking losses against character
//          
//          Check 0x0037dca5 for more info
//          
//          Bit 0 Rolling Guy 1 (Rolling Guy Leader)
//          Bit 1 Rolling Guy 2 (Rolling Guy 1)
//          Bit 2 Rolling Guy 3 (Rolling Guy 2)
//          Bit 3 Rolling Guy 4 (Rolling Guy 3)
//          Bit 4 Rolling Guy 5 (Rolling Guy 4)
//          Bit 5 Rolling Guy 6 (Rolling Guy 5)
//          Bit 6 Happy Run (Little Gang Leader)
//          Bit 7 Kiss My Bumper (Little Gang 1)
function lossesStart() => byte(0x37DCA6)

function lossesLocationPlusOffset(offset) => 0x37DCA6 + offset

// $37DCE5: [408-bit]  Off by 1 array note.  List of all Rival who has the player has beaten.
//          
//          Values (NOTE This is 1-index, due to how it is in game, it maybe be 0-index in game.
//          1=Rolling Guy 1 (Rolling Guy Leader)
//          2=Rolling Guy 2 (Rolling Guy 1)
//          3=Rolling Guy 3 (Rolling Guy 2)
//          4=Rolling Guy 4 (Rolling Guy 3)
//          5=Rolling Guy 5 (Rolling Guy 4)
//          6=Rolling Guy 6 (Rolling Guy 5)
//          7=Happy Run (Little Gang Leader)
//          8=Kiss My Bumper (Little Gang 1)
//          9=Talking Head (Little Gang 2)
//          10=Mr. Thanks (Little Gang 3)
//          11=Spring Bird (Little Gang 4)
//          12=Lazy Butt (Little Gang 5)
//          13=Old Star (SS Limited Leader)
//          14=Heaven's Door (SS Limited 1)
//          15=Black Rain (SS Limited 2)
//          16=Red Thunder (SS Limited 3)
//          17=Sports Killer (SS Limited 4)
//          18=New Star (SS Limited 5)
//          19=Chemistry (SS Limited 6)
//          20=Excite Carmine (SS Limited 7)
//          21=Invincible Dinner (Knife and Forks Leader)
//          22=Table Manner (Knife and Forks 1)
//          23=Street Wine (Knife and Forks 2)
//          24=Golden Cream Soup (Knife and Forks 3)
//          25=Midnight � la Mode (Knife and Forks 4)
//          26=4 Star Driver (Knife and Forks 5)
//          27=Red Table Cloth (Knife and Forks 6)
//          28=Sword of Dragon (Black Knights Leader)
//          29=Dark Varlet (Black Knights 1)
//          30=Dark Killer (Black Knights 2)
//          31=Dark Eyes (Black Knights 3)
//          32=Dark Crow (Black Knights 4)
//          33=Dark Cloud (Black Knights 5)
//          34=Dark Miracle (Black Knights 6)
//          35=Red Meteor (Fine Drive Leader)
//          36=Sylvester (Fine Drive 1)
//          37=Hell's Drifter (Fine Drive 2)
//          38=King of 2000cc (Fine Drive 3)
//          39=Drift King (Fine Drive 4)
//          40=Funky Monkey (Fine Drive 5)
//          41=Natural Soldier (Fine Drive 6)
//          42=Fire Bird (Fine Drive 7)
//          43=Flying Sasuke (RATT Leader)
//          44=Red Shadow (RATT 1)
//          45=Thunder Bird (RATT 2)
//          46=Rental Driver (RATT 3)
//          47=Gamer Racer (RATT 4)
//          48=Drift Queen (RATT 5)
//          49=Shocking Joe (Queen's Paradise Leader)
//          50=Sunday Driver (Queen's Paradise 1)
//          51=Balalaika Man (Queen's Paradise 2)
//          52=Chopper (Queen's Paradise 3)
//          53=Lucky Guy (Queen's Paradise 4)
//          54=Ballad (Queen's Paradise 5)
//          55=Mr. Mystery (Queen's Paradise 6)
//          56=Lonely Jackal (RINGS Leader)
//          57=Shocking Slide Tail (RINGS 1)
//          58=Meteor (RINGS 2)
//          59=Tune Up Junky (RINGS 3)
//          60=Silver Angel (RINGS 4)
//          61=White Devil (RINGS 5)
//          62=Flume (RINGS 6)
//          63=Myna Bird (RINGS 7)
//          64=Highway Prince (Curving Edge Leader)
//          65=Mr. Fire (Curving Edge 1)
//          66=Wind of Night (Curving Edge 2)
//          67=Professor Robledo (Curving Edge 3)
//          68=Thunder Flare (Curving Edge 4)
//          69=Road Killer (Curving Edge 5)
//          70=Mr. Firm (Galaxy Racers Leader)
//          71=Broken Arrow (Galaxy Racers 1)
//          72=Lovely Erotica (Galaxy Racers 2)
//          73=Mr. Othello (Galaxy Racers 3)
//          74=Sweet Honey (Galaxy Racers 4)
//          75=Sabrina (Galaxy Racers 5)
//          76=Bloody Rose (Max Racing Leader)
//          77=Golden Beast (Max Racing 1)
//          78=Crazy Hooligan (Max Racing 2)
//          79=Blue Shadow (Max Racing 3)
//          80=Dark Panther (Max Racing 4)
//          81=High Speed Blue Thunder (Max Racing 5)
//          82=High Speed White Blade (Max Racing 6)
//          83=High Speed Blood Rain (Max Racing 7)
//          84=300 Mile Red Ruby (Elegant Wild Leader)
//          85=Deep Green (Elegant Wild 1)
//          86=White Revolution (Elegant Wild 2)
//          87=Hostman Hut (Elegant Wild 3)
//          88=Black Cinderella (Elegant Wild 4)
//          89=Unfinish Yellow (Elegant Wild 5)
//          90=Happy Chappy (Departures Leader)
//          91=Night Killer (Departures 1)
//          92=Sweet Surrender (Departures 2)
//          93=Cool Sight (Departures 3)
//          94=Great Finance (Departures 4)
//          95=Up Beat (Departures 5)
//          96=Crystal Prince (Departures 6)
//          97=Burning Mirage (Twister Leader)
//          98=Smile (Twister 1)
//          99=Sweet Blues (Twister 2)
//          100=Blue Writer (Twister 3)
//          101=Shooting Star (Twister 4)
//          102=Baron (Twister 5)
//          103=Rainy Day (Twister 6)
//          104=Fire Revenge (Catz Leader)
//          105=Dark Mist (Catz 1)
//          106=Highway Wall (Catz 2)
//          107=Wine Chase (Catz 3)
//          108=Firefighter (Catz 4)
//          109=Fire Driver (Catz 5)
//          110=Unlucky Duke (Catz 6)
//          111=Hearing Master (The Road of Justice Leader)
//          112=Highway Magician (The Road of Justice 1)
//          113=Fighting Master (The Road of Justice 2)
//          114=Wall Street (The Road of Justice 3)
//          115=Flame Canon (The Road of Justice 4)
//          116=Shining (The Road of Justice 5)
//          117=Happy Camper (The Road of Justice 6)
//          118=Thunder Shift (Diamond Image Leader)
//          119=Lone Wolf (Diamond Image 1)
//          120=Spring Rain (Diamond Image 2)
//          121=Silver Bullet (Diamond Image 3)
//          122=Troubleshooter (Diamond Image 4)
//          123=Yellow Angel (Diamond Image 5)
//          124=Hip Hop Red (Rhythm Box Leader)
//          125=Jazz Green (Rhythm Box 1)
//          126=Classical Blue (Rhythm Box 2)
//          127=Stormy Calligrapher (Rhythm Box 3)
//          128=Pink Groove (Rhythm Box 4)
//          129=Midnight Blue (Rhythm Box 5)
//          130=Requiem (Wind Stars Leader)
//          131=R Magic (Wind Stars 1)
//          132=Diamond Dust (Wind Stars 2)
//          133=Yellow Flare (Wind Stars 3)
//          134=Mad Train (Wind Stars 4)
//          135=Speedy Valkyrie (Wind Stars 5)
//          136=Blue Star (Wind Stars 6)
//          137=Moody Queen (Wind Stars 7)
//          138=Visual Driver (Harmonize Leader)
//          139=Curve Block (Harmonize 1)
//          140=Highway Silver Arrow (Harmonize 2)
//          141=Aero Star (Harmonize 3)
//          142=Water Drift (Harmonize 4)
//          143=Brand New Thunder (Harmonize 5)
//          144=Dream Light (Harmonize 6)
//          145=Revolution (Super Speed Wagon Leader)
//          146=Magical (Super Speed Wagon 1)
//          147=Belly-ache (Super Speed Wagon 2)
//          148=Fruit Basket (Super Speed Wagon 3)
//          149=Jumping (Super Speed Wagon 4)
//          150=Shuffle (Super Speed Wagon 5)
//          151=Blue Speed (Another Star Leader)
//          152=Silver Speed (Another Star 1)
//          153=Lightning Bird (Another Star 2)
//          154=Red Shut (Another Star 3)
//          155=Battle Scratch (Another Star 4)
//          156=Lightning Eyes (Another Star 5)
//          157=U Violet (Another Star 6)
//          158=Time is Money (Gesellschaft Leader)
//          159=Lost Kid (Gesellschaft 1)
//          160=Lone Survivor (Gesellschaft 2)
//          161=Cool Guy (Gesellschaft 3)
//          162=Happy Extreme (Gesellschaft 4)
//          163=Angry Princess (Gesellschaft 5)
//          164=Wind Blade (Explosion Leader)
//          165=Golden Fang (Explosion 1)
//          166=Trouble Maker (Explosion 2)
//          167=Silent Sense (Explosion 3)
//          168=Blue Phoenix (Explosion 4)
//          169=Through Dog (Explosion 5)
//          170=Spirit Crasher (Highway Outlaw Leader)
//          171=Pride Killer (Highway Outlaw 1)
//          172=Cold Prince (Highway Outlaw 2)
//          173=Mad Driver (Highway Outlaw 3)
//          174=Driving Sir (Highway Outlaw 4)
//          175=Totem Pole (Highway Outlaw 5)
//          176=Spiral (Highway Outlaw 6)
//          177=Drift Dancer (R.Gangs Leader)
//          178=Street Dancer (R.Gangs 1)
//          179=Hell's Bartender (R.Gangs 2)
//          180=Professor Speedy (R.Gangs 3)
//          181=Wind Impala (R.Gangs 4)
//          182=Black Mirage (R.Gangs 5)
//          183=Rain Drop (R.Gangs 6)
//          184=Sonic Runner (Cupid Arrows Leader)
//          185=Mysterious Nymph (Cupid Arrows 1)
//          186=Moon Light Child (Cupid Arrows 2)
//          187=Cowboy Girl (Cupid Arrows 3)
//          188=Silver Impact (Cupid Arrows 4)
//          189=246 Heart Breaker (Cupid Arrows 5)
//          190=Ion (Tokio Jungle Leader)
//          191=MJ6feet6 (Tokio Jungle 1)
//          192=Black Wind (Tokio Jungle 2)
//          193=White Fox (Tokio Jungle 3)
//          194=Salty Dog (Tokio Jungle 4)
//          195=Slide Freek (Tokio Jungle 5)
//          196=Driving Blue Wave (Tokio Jungle 6)
//          197=Unstoppable Dream (TR Racing Leader)
//          198=Lovely Girl (TR Racing 1)
//          199=Rule Breaker (TR Racing 2)
//          200=180 Master (TR Racing 3)
//          201=Dawn Shaker (TR Racing 4)
//          202=Night Worker (TR Racing 5)
//          203=Dancing Chaser (TR Racing 6)
//          204=Car Maniac (Top Level Leader)
//          205=Mystery Girl (Top Level 1)
//          206=Red Tears (Top Level 2)
//          207=Sir General (Top Level 3)
//          208=Legendary Digger (Top Level 4)
//          209=Midnight Through (Top Level 5)
//          210=Russian Blue (Top Level 6)
//          211=Blue Meteor (Free Way Leader)
//          212=Orange Head (Free Way 1)
//          213=Silver Fox (Free Way 2)
//          214=Nightmare (Free Way 3)
//          215=Silent Reviver (Free Way 4)
//          216=Ultimate Killer (Free Way 5)
//          217=Crystal Knight (Free Way 6)
//          218=Speed Junky (Free Way 7)
//          219=Highway Bomber (Free Way 8)
//          220=Tobby (Dry Cruise Leader)
//          221=Midnight Owl (Dry Cruise 1)
//          222=Entrepreneur (Dry Cruise 2)
//          223=Rain Master (Dry Cruise 3)
//          224=Mr. Max (Dry Cruise 4)
//          225=Mr. Muscle (Dry Cruise 5)
//          226=Angel Smile (Dry Cruise 6)
//          227=Mr. Terminate (E.R.O. Leader)
//          228=Non Stop Emotion (E.R.O. 1)
//          229=Brand New Morning (E.R.O. 2)
//          230=Cool B (E.R.O. 3)
//          231=Star Holder (E.R.O. 4)
//          232=Sentimental Flame (E.R.O. 5)
//          233=Strange Devil (E.R.O. 6)
//          234=Texas' White Wolf (Team Alpha Leader)
//          235=Gattling Gun (Team Alpha 1)
//          236=Mike the Horseman (Team Alpha 2)
//          237=Smiling Shadow (Team Alpha 3)
//          238=Rock Spider (Team Alpha 4)
//          239=Code F (Team Alpha 5)
//          240=A+ Driver (True Ride Leader)
//          241=Large Impact (True Ride 1)
//          242=Iron Blocker (True Ride 2)
//          243=Genius Rookie (True Ride 3)
//          244=Wolter Wolf (True Ride 4)
//          245=Pink Lily (True Ride 5)
//          246=Strike Star (True Ride 6)
//          247=Sunny Dragon (True Ride 7)
//          248=Killing Machine (Unlimited Leader)
//          249=Lone MONSTER (Unlimited 1)
//          250=Scotch (Unlimited 2)
//          251=Yesman (Unlimited 3)
//          252=Daimajin (Unlimited 4)
//          253=Spider (Unlimited 5)
//          254=Sleepy Driver (Unlimited 6)
//          255=Silver Prince (R.R. Leader)
//          256=Turning Artist (R.R. 1)
//          257=Asphalt's Cry (R.R. 2)
//          258=HIROSHI (R.R. 3)
//          259=Dark Memory (R.R. 4)
//          260=Risky Cat (R.R. 5)
//          261=Black Bird (R.R. 6)
//          262=High Speed Star (R.R. 7)
//          263=Black Dragon (Thunder Dragoon Leader)
//          264=White Dragon (Thunder Dragoon 1)
//          265=Yellow Dragon (Thunder Dragoon 2)
//          266=Red Dragon (Thunder Dragoon 3)
//          267=Green Dragon (Thunder Dragoon 4)
//          268=Gray Dragon (Thunder Dragoon 5)
//          269=Blue Dragon (Thunder Dragoon 6)
//          270=Abf911 (Abflug SRT Leader)
//          271=Dandy (Abflug SRT 1)
//          272=Superman (Abflug SRT 2)
//          273=Teru (Abflug SRT 3)
//          274=Horse Head (Abflug SRT 4)
//          275=Speed Runner (Commander Leader)
//          276=Mr. Japan (Commander 1)
//          277=Shoe Keeper (Commander 2)
//          278=Weak Arm (Commander 3)
//          279=Girl Hunter (Commander 4)
//          280=Pickle (Commander 5)
//          281=Rainbow Traveler (Commander 6)
//          282=Swimmer (Commander 7)
//          283=Yellow Voltage (Double Mind Leader)
//          284=Dark Labyrinth (Double Mind 1)
//          285=Blood (Double Mind 2)
//          286=Gray Giant (Double Mind 3)
//          287=Brown Giant (Double Mind 4)
//          288=White Angel (Double Mind 5)
//          289=Gray Fairy (Double Mind 6)
//          290=Jamz (APS Leader)
//          291=Blocky Rider (APS 1)
//          292=King (APS 2)
//          293=Revived Wizard (APS 3)
//          294=Shyxgirl (APS 4)
//          295=Double Booking (APS 5)
//          296=New Wind (APS 6)
//          297=Burning Leader (Fanatic Future Leader)
//          298=Cool Looking (Fanatic Future 1)
//          299=Mysterious Driver (Fanatic Future 2)
//          300=Burning General (Fanatic Future 3)
//          301=Intelligent Teacher (Fanatic Future 4)
//          302=Larger than Life (Fanatic Future 5)
//          303=Love Knuckle (Fanatic Future 6)
//          304=Iceman (Speed Master Leader)
//          305=Crazy Moon (Speed Master 1)
//          306=Visual Tail (Speed Master 2)
//          307=Sunset Rider (Speed Master 3)
//          308=White Witch (Speed Master 4)
//          309=Pearl Kiss (Speed Master 5)
//          310=Maniac Player (Speed Master 6)
//          311=Black Angel (Speed Master 7)
//          312=Unknown Hero (Speed Master 8)
//          313=Fast Beat (Speed Master 9)
//          314=Lightning (Wanderers Leader)
//          315=White Panther (Wanderers 1)
//          316=Garage Door (Wanderers 2)
//          317=Speed Drinker (Wanderers 3)
//          318=Lonely Wolf (Wanderers 4)
//          319=Steam Storm (Wanderers 5)
//          320=Invincible Artist (Wanderers 6)
//          321=Lost Freak (Wanderers 7)
//          322=Bloody Mary (Wanderers 8)
//          323=Illusion B (Wanderers 9)
//          324=Caffeine Addict (Wanderers 10)
//          325=Magazine Freak (Wanderers 11)
//          326=Machine of Inferno (Wanderers 12)
//          327=Anguish Barbarian (Wanderers 13)
//          328=Waist Master (Wanderers 14)
//          329=Master Position (Wanderers 15)
//          330=Pretty Affair (Wanderers 16)
//          331=Devil Driver (Wanderers 17)
//          332=Street Gambler (Wanderers 18)
//          333=Green Wild (Wanderers 19)
//          334=Dark Desperado (Wanderers 20)
//          335=Eternity (Wanderers 21)
//          336=Mosquito Lemon (Wanderers 22)
//          337=Fearful Princess (Wanderers 23)
//          338=Dumb yet Smart (Wanderers 24)
//          339=Wild Heart (Wanderers 25)
//          340=Road Master (Wanderers 26)
//          341=Glamour Girl (Wanderers 27)
//          342=God Year (Wanderers 28)
//          343=Raspberry Kiss (Wanderers 29)
//          344=Craft Man (Wanderers 30)
//          345=Cutie Pie (Wanderers 31)
//          346=Storm Screamer (Wanderers 32)
//          347=Uncrushable Alexander (Wanderers 33)
//          348=Silver Ruler (Wanderers 34)
//          349=Night Wolf (Wanderers 35)
//          350=Max Energy (Wanderers 36)
//          351=Jet Skater (Wanderers 37)
//          352=Crying Baby (Wanderers 38)
//          353=Tomorrow Again (Wanderers 39)
//          354=Healthy Hero (Wanderers 40)
//          355=Late Night Cinderella (Wanderers 41)
//          356=Unbalanced Heart (Wanderers 42)
//          357=Toll Free (Wanderers 43)
//          358=Madness (Wanderers 44)
//          359=Technician Guy (Wanderers 45)
//          360=Fast Phobe (Wanderers 46)
//          361=ZERO (Wanderers 47)
//          362=SPEED BOX (Wanderers 48)
//          363=Mask (Wanderers 49)
//          364=Windy Fanfare (Wanderers 50)
//          365=Start Dash (Wanderers 51)
//          366=Golden License (Wanderers 52)
//          367=Iron Racer (Wanderers 53)
//          368=Exotic Butterfly (Wanderers 54)
//          369=King of Eden (Wanderers 55)
//          370=Loyal Knight (Wanderers 56)
//          371=Gentle Rain (Wanderers 57)
//          372=Last Flight (Wanderers 58)
//          373=Silent Barbarian (Wanderers 59)
//          374=Traitor Jack knife  Traitor Jack Knife (13 Devils Leader)
//          375=True Slide True Slide (13 Devils 1)
//          376=Unhappy Angel  Dejected angel (13 Devils 2)
//          377=Hard Weapon Hard Weapon (13 Devils 3)
//          378=Fallen Blade Fallen Blade (13 Devils 4)
//          379=Blood Hound Blood Hound (13 Devils 5)
//          380=Dark Producer  Dark Producer (13 Devils 6)
//          381=Mr. Sitar  Mr. Sitar (13 Devils 7)
//          382=Iron Heart  Iron Heart (13 Devils 8)
//          383=Dying Star Dying Star-0 (13 Devils 9)
//          384=Dreamy Ghost Dreamy Ghost (13 Devils 10)
//          385=Tail Gunner  Tail Gunner (13 Devils 11)
//          386=Shadow Eyes Shadow eyes icon (13 Devils 12)
//          387=Speed King - [S1]  Tim2out571571 (13 Devils 13)
//          388=Midnight Rose Midnight rose icon (The Zodiac Leader)
//          389=Golden Wind  Golden wind icon (The Zodiac 1)
//          390=Dark Ringleader  Dark ringleader icon (The Zodiac 2)
//          391=Hard Lift  Hard lift icon (The Zodiac 3)
//          392=Blue Pressure Blue pressure icon (The Zodiac 4)
//          393=No-Crown King  Nocrown king icon (The Zodiac 5)
//          394=Crying Pluto  Crying pluto icon (The Zodiac 6)
//          395=Red Devil  Red devil icon (The Zodiac 7)
//          396=Queen's Knight Queens knight icon (The Zodiac 8)
//          397=Purple Meteor Purple meteor icon (The Zodiac 9)
//          398=Exotic Eve  Exotic eve (The Zodiac 10)
//          399=White Charisma [S2]  White charisma icon (The Zodiac 11)
//          400=Unknown - [U]  Devilz icon (Final Boss Leader)
function winsInfo() => byte(0x37DCE5)

// $37DCE6: (8-bit) Location for marking wins against Rivals
//          
//          Bit 0 Rolling Guy 1 (Rolling Guy Leader)
//          Bit 1 Rolling Guy 2 (Rolling Guy 1)
//          Bit 2 Rolling Guy 3 (Rolling Guy 2)
//          Bit 3 Rolling Guy 4 (Rolling Guy 3)
//          Bit 4 Rolling Guy 5 (Rolling Guy 4)
//          Bit 5 Rolling Guy 6 (Rolling Guy 5)
//          Bit 6 Happy Run (Little Gang Leader)
//          Bit 7 Kiss My Bumper (Little Gang 1)
function winsStart() => byte(0x37DCE6)

function winsLocationPlusOffset(offset) => 0x37DCE6 + offset

// $37DD66: (165-bit) Car Unlock array.
//          
//          Cars will unlock from this list, by setting the bit to true.  Some cars are available from the start, others will unlock as you beat their model in races.
//          
//          Yes this size is not a multiple of 8, because it's really a bit field.
//          
//          Hex (Bit number) values are as follows.
//          0x00 = AE86L3
//          0x01 = AE86T3
//          0x02 = AE86L2
//          0x03 = AE86T2
//          0x04 = SW20GT
//          0x05 = SW20G
//          0x06 = A80RZ
//          0x07 = A80SZ
//          0x08 = A80RZM
//          0x09 = A80SZM
//          0x0a = XE10RS
//          0x0b = XE10AS
//          0x0c = 100TV
//          0x0d = 100TVM
//          0x0e = 100MV
//          0x0f = 100MVM
//          0x10 = S13K
//          0x11 = S13Q
//          0x12 = PS13K
//          0x13 = PS13Q
//          0x14 = PS13KK
//          0x15 = S14K
//          0x16 = S14Q
//          0x17 = S14KM
//          0x18 = S14QM
//          0x19 = S15R
//          0x1a = S15S
//          0x1b = RPS13X
//          0x1c = RPS133
//          0x1d = R32RV2
//          0x1e = R32RN
//          0x1f = R32GTM
//          0x20 = R33RV
//          0x21 = R33RVM
//          0x22 = R34RV
//          0x23 = R34RVM
//          0x24 = R34GT
//          0x25 = R34GTM
//          0x26 = Z32VS
//          0x27 = Z32ZX
//          0x28 = Y33CV
//          0x29 = Y33GTU
//          0x2a = QX7
//          0x2b = QX7A
//          0x2c = QW
//          0x2d = MH5
//          0x2e = MH8
//          0x2f = ML3
//          0x30 = ML5
//          0x31 = RPT6
//          0x32 = RPT7
//          0x33 = CE9A
//          0x34 = CN9A
//          0x35 = CP9A5
//          0x36 = CP9A6
//          0x37 = CP9A6M
//          0x38 = FC3E3
//          0x39 = FC3X
//          0x3a = FD3RS
//          0x3b = FD3RZ
//          0x3c = GC8K
//          0x3d = GC8S4
//          0x3e = GC8C4
//          0x3f = GC8S5
//          0x40 = GC8C5
//          0x41 = GC8S6
//          0x42 = GC8C6
//          0x43 = GF8W4
//          0x44 = GF8W5
//          0x45 = GF8W6
//          0x46 = JS4
//          0x47 = JS4L
//          0x48 = 964T
//          0x49 = 964C2
//          0x4a = S30Z
//          0x4b = S30Z6
//          0x4c = AE111RL
//          0x4d = AE111RT
//          0x4e = UZZ30
//          0x4f = JZZ30
//          0x50 = NB8RS
//          0x51 = NB8RSM
//          0x52 = QW3
//          0x53 = ST205
//          0x54 = ST202
//          0x55 = Z15AM
//          0x56 = Z15A
//          0x57 = Z16A
//          0x58 = DE3A
//          0x59 = N15N1
//          0x5a = BE5
//          0x5b = BH5B
//          0x5c = T231
//          0x5d = W30
//          0x5e = Y34CV
//          0x5f = Y34GU
//          0x60 = E36
//          0x61 = N5S16M
//          0x62 = N5S16
//          0x63 = C34M
//          0x64 = C34
//          0x65 = S161V
//          0x66 = S161VM
//          0x67 = ML11
//          0x68 = ML11C
//          0x69 = 4K1
//          0x6a = 4E1
//          0x6b = YT1
//          0x6c = PG6SA
//          0x6d = EA11R
//          0x6e = EA21R
//          0x6f = JCESE
//          0x70 = A31C
//          0x71 = RF2
//          0x72 = A187
//          0x73 = RX3
//          0x74 = KPGC10
//          0x75 = R30M
//          0x76 = R30
//          0x77 = SAGTX
//          0x78 = VGTS
//          0x79 = S30ZX
//          0x7a = 4BV
//          0x7b = 4BU
//          0x7c = D32AGS
//          0x7d = ECGT
//          0x7e = 089G
//          0x7f = NCP35
//          0x80 = UCF308
//          0x81 = A70GTA
//          0x82 = A70TTR
//          0x83 = CT9A
//          0x84 = TAGDA
//          0x85 = TASTI
//          0x86 = CBAEP
//          0x87 = 100TVK
//          0x88 = JS4X
//          0x89 = JZZ30K
//          0x8a = Z15AMK
//          0x8b = RPT7B
//          0x8c = A70GTK
//          0x8d = R34RKK
//          0x8e = Y34GUK
//          0x8f = UZZ30K
//          0x90 = R34RK
//          0x91 = Z32VSK
//          0x92 = A80RZK
//          0x93 = FD3RK
//          0x94 = NCP35K
//          0x95 = S15RK
//          0x96 = R33RK
//          0x97 = FD3RKK
//          0x98 = S13KKK
//          0x99 = Z32ZXK
//          0x9a = S14KMK
//          0x9b = Y33CVK
//          0x9c = S161VK
//          0x9d = A80RK
//          0x9e = FC3E3K
//          0x9f = Z16AK
//          0xa0 = RPT6B
//          0xa1 = PS13XK
//          0xa2 = S15RKK
//          0xa3 = JCESEK
//          0xa4 = R32RNK
function carUnlockArray() => byte(0x37DD66)

function carUnlockArrayPlusOffset(offset) => 0x37DD66+offset

TOTAL_CARS_TO_BUY = 0xa4 + 1
INITIAL_CAR_SELECTION = 16*3  // able to buy 16 cars in each class at the beginning of the game. 
TOTAL_CARS_TO_UNLOCK = TOTAL_CARS_TO_BUY - INITIAL_CAR_SELECTION   // 117
QUARTER_OF_CARS_TO_UNLOCK = TOTAL_CARS_TO_UNLOCK / 4
TENTH_OF_CARS_TO_UNLOCK = TOTAL_CARS_TO_UNLOCK / 10

// $37DD87: (8-bit signed) Current day of the Quest mode.
function currentDayOffByOne() => byte(0x37DD87)

CarLookup =
{

    0x00:"AE86L3",
    0x01:"AE86T3",
    0x02:"AE86L2",
    0x03:"AE86T2",
    0x04:"SW20GT",
    0x05:"SW20G",
    0x06:"A80RZ",
    0x07:"A80SZ",
    0x08:"A80RZM",
    0x09:"A80SZM",
    0x0a:"XE10RS",
    0x0b:"XE10AS",
    0x0c:"100TV",
    0x0d:"100TVM",
    0x0e:"100MV",
    0x0f:"100MVM",
    0x10:"S13K",
    0x11:"S13Q",
    0x12:"PS13K",
    0x13:"PS13Q",
    0x14:"PS13KK",
    0x15:"S14K",
    0x16:"S14Q",
    0x17:"S14KM",
    0x18:"S14QM",
    0x19:"S15R",
    0x1a:"S15S",
    0x1b:"RPS13X",
    0x1c:"RPS133",
    0x1d:"R32RV2",
    0x1e:"R32RN",
    0x1f:"R32GTM",
    0x20:"R33RV",
    0x21:"R33RVM",
    0x22:"R34RV",
    0x23:"R34RVM",
    0x24:"R34GT",
    0x25:"R34GTM",
    0x26:"Z32VS",
    0x27:"Z32ZX",
    0x28:"Y33CV",
    0x29:"Y33GTU",
    0x2a:"QX7",
    0x2b:"QX7A",
    0x2c:"QW",
    0x2d:"MH5",
    0x2e:"MH8",
    0x2f:"ML3",
    0x30:"ML5",
    0x31:"RPT6",
    0x32:"RPT7",
    0x33:"CE9A",
    0x34:"CN9A",
    0x35:"CP9A5",
    0x36:"CP9A6",
    0x37:"CP9A6M",
    0x38:"FC3E3",
    0x39:"FC3X",
    0x3a:"FD3RS",
    0x3b:"FD3RZ",
    0x3c:"GC8K",
    0x3d:"GC8S4",
    0x3e:"GC8C4",
    0x3f:"GC8S5",
    0x40:"GC8C5",
    0x41:"GC8S6",
    0x42:"GC8C6",
    0x43:"GF8W4",
    0x44:"GF8W5",
    0x45:"GF8W6",
    0x46:"JS4",
    0x47:"JS4L",
    0x48:"964T",
    0x49:"964C2",
    0x4a:"S30Z",
    0x4b:"S30Z6",
    0x4c:"AE111RL",
    0x4d:"AE111RT",
    0x4e:"UZZ30",
    0x4f:"JZZ30",
    0x50:"NB8RS",
    0x51:"NB8RSM",
    0x52:"QW3",
    0x53:"ST205",
    0x54:"ST202",
    0x55:"Z15AM",
    0x56:"Z15A",
    0x57:"Z16A",
    0x58:"DE3A",
    0x59:"N15N1",
    0x5a:"BE5",
    0x5b:"BH5B",
    0x5c:"T231",
    0x5d:"W30",
    0x5e:"Y34CV",
    0x5f:"Y34GU",
    0x60:"E36",
    0x61:"N5S16M",
    0x62:"N5S16",
    0x63:"C34M",
    0x64:"C34",
    0x65:"S161V",
    0x66:"S161VM",
    0x67:"ML11",
    0x68:"ML11C",
    0x69:"4K1",
    0x6a:"4E1",
    0x6b:"YT1",
    0x6c:"PG6SA",
    0x6d:"EA11R",
    0x6e:"EA21R",
    0x6f:"JCESE",
    0x70:"A31C",
    0x71:"RF2",
    0x72:"A187",
    0x73:"RX3",
    0x74:"KPGC10",
    0x75:"R30M",
    0x76:"R30",
    0x77:"SAGTX",
    0x78:"VGTS",
    0x79:"S30ZX",
    0x7a:"4BV",
    0x7b:"4BU",
    0x7c:"D32AGS",
    0x7d:"ECGT",
    0x7e:"089G",
    0x7f:"NCP35",
    0x80:"UCF308",
    0x81:"A70GTA",
    0x82:"A70TTR",
    0x83:"CT9A",
    0x84:"TAGDA",
    0x85:"TASTI",
    0x86:"CBAEP",
    0x87:"100TVK",
    0x88:"JS4X",
    0x89:"JZZ30K",
    0x8a:"Z15AMK",
    0x8b:"RPT7B",
    0x8c:"A70GTK",
    0x8d:"R34RKK",
    0x8e:"Y34GUK",
    0x8f:"UZZ30K",
    0x90:"R34RK",
    0x91:"Z32VSK",
    0x92:"A80RZK",
    0x93:"FD3RK",
    0x94:"NCP35K",
    0x95:"S15RK",
    0x96:"R33RK",
    0x97:"FD3RKK",
    0x98:"S13KKK",
    0x99:"Z32ZXK",
    0x9a:"S14KMK",
    0x9b:"Y33CVK",
    0x9c:"S161VK",
    0x9d:"A80RK",
    0x9e:"FC3E3K",
    0x9f:"Z16AK",
    0xa0:"RPT6B",
    0xa1:"PS13XK",
    0xa2:"S15RKK",
    0xa3:"JCESEK",
    0xa4:"R32RNK"
}

// $37DD88: (32-bit signed) Total money in Quest mode divided by 10s.
//          
//          0x1 = 10 dollars, 0x10 = 160 dollars
//          
//          This has 32 bits, however the in game display shows up to 9,999,9990.  Unknown if the game stores extra money.
//          
//          (Cash, just because I like to search the word cash)
function totalMoneyQuestMode() => dword(0x37DD88)

// $37DD90: (32-bit signed) Total Races won in quest mode
//          
//          Previous Wins is located at 0x003115a4
function totalRacesWonQuestMode() => dword(0x37DD90)
function prevRacesWonQuestMode() => dword(0x003115a4)

function racesWonInNight() => totalRacesWonQuestMode() - prevRacesWonQuestMode()

// $37DD94: (32-bit signed) Total Races lost in quest mode
//          
//          Previous Losses is located at 0x003115a8
function totalRacesLostQuestMode() => dword(0x37DD94)
function prevRacesLostQuestMode() => dword(0x003115a8)

function racesLostInNight() => totalRacesLostQuestMode() - prevRacesLostQuestMode()

// $37DD98: (32-bit signed) Total Races ending in a draw in quest mode
//          
//          Previous Draws is located at 0x003115aC
function totalRacesDrawnQuestMode() => dword(0x37DD98)
function prevRacesDrawnQuestMode() => dword(0x003115aC)

function racesDrawnInNight() => totalRacesDrawnQuestMode() - prevRacesDrawnQuestMode()

// $73FBBC: (8-bit) Movie playing in DVD Extras
//          
//          When 0x0073fbbf is set to 06
//          
//          0x02 = The Fast and furious
//          0x03 = Tokyo Hardcore: Night Warriors
function whichMoviePlaying() => byte(0x73FBBC)
FAST_AND_FURIOUS = 0x02
TOKYO_HARDCORE_NIGHT_WARRIORS = 0x03
// $73FBBE: (8-bit) Movie playing
//          
//          If set to 1 the game will play a movie rather than enter the game.
//          
//          Not too reliable, but interesting for sure.
function isMoviePlaying() => byte(0x73FBBE)

MOVIE_IS_PLAYING = 1
function movieIsPlaying() => isMoviePlaying() == MOVIE_IS_PLAYING

// $73FBBF: (8-bit) Mode of game/Main Menu Selection
//          
//          Changes based on game mode, doesn't appear to change after selecting from the main menu.
//          
//          Will change the "Exit X" inside the mode, and changes the options highlighted when returning to the main menu.
//          
//          0x00= Quest
//          0x01= Quick Race
//          0x02= Time Attack
//          0x03= Free Run
//          0x04= Versus
//          0x05= System (Options)
//          0x06= DVD Extras
//          0x08= Main Menu
function currentGameMode() => byte(0x73FBBF)

QUEST_MODE = 0x00
QUICK_RACE_MODE = 0x01
TIME_ATTACK_MODE = 0x02
FREE_RUN_MODE = 0x03
VERSUS_MODE = 0x04
SYSTEM_MODE = 0x05
DVD_EXTRAS_MODE = 0x06
MAIN_MENU = 0x08

GameModeLookup =
{
    QUEST_MODE:"Quest Mode",
    QUICK_RACE_MODE:"Quick Race",
    TIME_ATTACK_MODE:"Time Attack",
    SYSTEM_MODE:"System",
    DVD_EXTRAS_MODE:"DVD Extras",
    MAIN_MENU: "Main"
}

function questMode() => currentGameMode() == QUEST_MODE
function quickRaceMode() => currentGameMode() == QUICK_RACE_MODE
function timeAttackMode() => currentGameMode() == TIME_ATTACK_MODE
function systemMode() => currentGameMode() == SYSTEM_MODE
function dvdExtrasMode() => currentGameMode() == DVD_EXTRAS_MODE
function mainMenu() => drivingGameMode() == MAIN_MENU

// $305630: (8-bit) Driving Game Mode
// 
//          Game mode that will be valid while in game (Driving around)
// 
//          Potential alternate at 0x37dc36 if this won't work, but these two appear to be in sync. 
// 
//          DO NOT USE IN FRONT END.
// 
//          0x00= Quest
//          0x01= Quick Race
//          0x02= Time Attack 
//          0x03= Free Run
//          0x04= Versus
function drivingGameMode() => byte(0x305630)

DEMO_MODE = 0x08   // Observed behavior. 

function questModeDriving() => drivingGameMode() == QUEST_MODE
function quickRaceModeDriving() => drivingGameMode() == QUICK_RACE_MODE
function timeAttackModeDriving() => drivingGameMode() == TIME_ATTACK_MODE
function freeRunModeDriving() => drivingGameMode() == FREE_RUN_MODE
function versusModeDriving() => drivingGameMode() == VERSUS_MODE
function demoMode() => drivingGameMode() == DEMO_MODE


// $73FBF0: (8-bit) On front End indicator.
//          
//          0x00 = In Front end.
//          0x01 = Driving or loading into the game.   Note this should not be used purely for "Driving"
//          
//          Note: there's about 22766 values I found for this that are boolean (0x00 and 0x01) So if this proves wrong, start from scratch and try to find something better.  Only chose this one due to closeness to 0x0073fbbf
function frontEndIndicator() => byte(0x73FBF0)

// $73FC48: (8-bit) Quest Menu Return option
//          
//          When choosing an option on the quest menu, this tells the system which option to highlight when returning.
//          
//          0xff = On Main Menu or no option selected.
//          0x00 = Start
//          0x01 = Car Change
//          0x02 = Settings
//          0x03 = Part Shop
//          0x04 = Car Shop
//          0x05 = Rivals
//          0x06 = System
//          0x07 = Quit
//          
//          Note this value changes when entering a mode.  But can tell you which submode the player is in (or last visited.
function questModeSubmenu() => byte(0x73FC48)

CAR_SHOP_SUB_MENU = 0x04
SYSTEM_QUEST_MODE_SUB_MENU = 0x06

function inCarShop() => questModeSubmenu() == CAR_SHOP_SUB_MENU
function inQuestSystemMenu() => questModeSubmenu() == SYSTEM_QUEST_MODE_SUB_MENU

// $742B68: (32-bit) Trip odometer in game.
//          
//          Every 0xa2 (162) increases the distance by .1  (note the game doesn't show a . but it is 1/10th of a mile due to time.
//          
//          Does not affect Odometer
function inGameTripOdometer() => dword(0x742B68)

// The factor that distances are multiplied by. 
DISTANCE_FACTOR = 1612

// $74AF6C: (8-bit) Driving in Game
//          
//          0x00 = In Front end. or Loading.
//          0x01 = Actually driving or paused while in game.
function inGameIndicator() => byte(0x74AF6C)

IN_GAME_INDICATOR_FRONT_END = 0x00
IN_GAME_INDICATOR_DRIVING = 0x01

// This can set 3 in game.  Might be bit 0 but let's do not Front end. 
function inGameDriving() => inGameIndicator() != IN_GAME_INDICATOR_FRONT_END 
function previnGameDriving() => prev(inGameIndicator()) != IN_GAME_INDICATOR_FRONT_END

// $7508F8: (32-bit) Player's Health in battle
//          
//          0x00 = death
//          0x4c4b40 = 	max?
function playersHealth() => dword(0x7508F8)

// $7508FC: (32-bit) Enemy's Health in battle
//          
//          0x00 = death
function enemysHealth() => dword(0x7508FC)

// $750900: (32-bit) Time in battle  (Frame amount)
//          
//          Each value is 16 miliseconds. Seems based on 60 fps.
//          Value appears to go over 59:59:999, but that is the highest displayed.  None of those values will ever appear though.
//          
//          Idea for achievement?  MOST time?
//          
//          Note: Freezing at a low value may freeze the players life as well.  Interesting.
function timeInBattle() => dword(0x750900)

// $750A80: (8-bit) Shows what post game screen is being displayed in Time Trial.
//          
//          This is not a control value, but will work for detecting when the time trial is over, so 0x00750900 and similar may be polled.
//          
//          0x00 = No screen.
//          0x01 = Time Trial timing or Quest mode money earned  post race screen.
//          0x02 = "continue"(retry) Replay, replay save, Return to Garage post race screen
//          0x03 = Pause menu
function postRaceScreen() => byte(0x750A80)

TIME_TRIAL_TIMING = 0x01
QUEST_MODE_POST_RACE = 0x01
QUICK_RACE_MODE_POST_RACE = 0x01

// $750B18: (8-bit) Ranking of Time Trial Course
//          
//          0x00 is first.
//          0xff is unranked.
function timeTrialCourseRanking() => byte(0x750B18)

// $750B20: (32-bit) Time in Time Trials in Milliseconds
//          
//          0x010000 for instance is 1048576 which is 17 minutes, 28 seconds 576 miliseconds
// Removed due to delayed use. 
function UNUSED_timeTrialTime() => dword(0x750B20)

// $629350: (32-bit) Lap Time in Time Trial in Milliseconds
//
//          Should work in race, and in post race screen. 
function timeTrialTime() => dword(0x629350)

// $37dc8e: (8-bit) Course Number for Time Trial
//          
//          0x00 = Kanda Bridge(Kanjyo Inner)   CCW
//          0x01 = Kanda Bridge(Kanjyo Outer)  CW
//          0x02 = Ariake(Shinkanjyo CCW) 
//          0x03 = Ariake(Shinkanjyo CW)
//          0x04 = Daikoku Port (Wangan North bound)
//          0x05 = Area 13 (Wangan South bound)  (Same as 0x04 in reverse, both sprints)
//          0x06 = Suzugamori (Haneda South bound)
//          0x07 = Shioiri (Haneda North bound)
//          0x08 = Kanda Bridge (C-1 CCW)
//          0x09 = Kanda Bridge (C-1 CW)
//          0x0A = 0-400m on Oval
//          0x0B = Oval 
function timetrialCourseIndex() => byte(0x0037dc8e)

KANDA_BRIDGE_CCW = 0x00
KANDA_BRIDGE_CW = 0x01
ARIAKE_CCW = 0x02
ARIAKE_CW = 0x03
DAIKOKU_SPRINT = 0x04
AREA_13_SPRINT = 0x05
SUZUGAMORI_SPRINT = 0x06
SHIOIRI_SPRINT = 0x07
KANDA_C1_CCW = 0x08
KANDA_C1_CW = 0x09
ZERO_TO_400M = 0x0A
OVAL = 0x0B


// $7508e4: (16-bit) Current Quick Race Round
//
// 0x00 = Round 1 
// Increments all the way to 100 
function quickRaceRound() => word(0x7508e4)

// $750b14: (8-bit) Quick Race Result Control Value. Quest Mode Result Value 
// 
// 0x00 = Win 
// 0x01 = Loss
// 0x02 = Draw
// 
// Draw is impossible in Quick Race.  Freezing this to 0x00 means you win every Quick Race  round.
// Freezing this to 0x00 in Quest mode means the end of race SAYS you won, however you don't get credit, and rivals are marked as "Lost" after the round. 
// 
// Can be used in either game mode though. 
function raceResult() => byte(0x750b14)

function quickRaceWon() => raceResult() == 0x00
function questRaceWon() => raceResult() == 0x00

// $6293aa:(8-bit) Index of Location on highway.
//
// Appears to be an index of the location of the driver on the Highway system.  However 0x006293ac is the ASCII text for the section.  For RP use 0x006293ac. 
function highwayLocationIndex() => byte(0x006293aa)

// Unfortunately our RP script won't let us read a ASCII string, so let's use this. 
// All names are taken from 0x003015D0.  Thanks Disassembly!

HighwayLocationArray = 
[
    "Kasumigaseki",
    "Miyakezaka JCT",
    "Daikancyo",
    "Kitanomaru",
    "Takehashi JCT",
    "Kanda Bridge",
    "Kanda Bridge JCT",
    "Gofuku Bridge",
    "Edo Bridge",
    "Edo Bridge JCT",
    "Takaracyo",
    "Kyo Bridge",
    "Kyo Bridge JCT",
    "Shintomicyo",
    "Ginza",
    "Shiodome JCT",
    "Hamasaki Bridge JCT",
    "Shiba Park",
    "Ichino Bridge JCT",
    "Iikura",
    "Tanimachi JCT",
    "Tokiwa Bridge",
    "Yaesu Parking",
    "Marunouchi",
    "West Ginza JCT",
    "West Ginza",
    "Shinkyo Bridge",
    "East Ginza",
    "Tuchi Bridge",
    "Shin Bridge",
    "Shiodome",
    "Hakozaki",
    "Hakozaki JCT",
    "Fukuzumi",
    "Kiba",
    "Shiohama",
    "Eda River",
    "Tatsumi JCT",
    "Ariake",
    "Ariake JCT",
    "Daiba",
    "Shibaura JCT",
    "Area 13",
    "Ooi",
    "Ooi JCT",
    "South Ooi",
    "Tokai JCT",
    "Central Airport",
    "Wagan I-8",
    "Ukishima",
    "East Oogijima",
    "Daikoku JCT",
    "Daikoku",
    "Namamugi JCT",
    "Shioiri",
    "Asada",
    "Hamakawasaki",
    "Daishi",
    "Haneda",
    "Airport West",
    "Showajima JCT",
    "Heiwajima",
    "Suzugamori",
    "Katsuura",
    "Shibaura",
    "Hamamachi"
]

HighwayLocationLookup =
{
    0x00: "Kasumigaseki",
    0x01: "Miyakezaka JCT",
    0x02: "Daikancyo",
    0x03: "Kitanomaru",
    0x04: "Takehashi JCT",
    0x05: "Kanda Bridge",
    0x06: "Kanda Bridge JCT",
    0x07:"Gofuku Bridge",
    0x08:"Edo Bridge",
    0x09:"Edo Bridge JCT",
    0x0A:"Takaracyo",
    0x0B:"Kyo Bridge",
    0x0C:"Kyo Bridge JCT",
    0x0D: "Shintomicyo",
    0x0E: "Ginza",
    0x0F: "Shiodome JCT",
    0x10: "Hamasaki Bridge JCT",
    0x11: "Shiba Park",
    0x12: "Ichino Bridge JCT",
    0x13: "Iikura",
    0x14: "Tanimachi JCT",
    0x15: "Tokiwa Bridge",
    0x16: "Yaesu Parking",
    0x17: "Marunouchi",
    0x18: "West Ginza JCT",
    0x19: "West Ginza",
    0x1A: "Shinkyo Bridge",
    0x1B: "East Ginza",
    0x1C: "Tuchi Bridge",
    0x1D: "Shin Bridge",
    0x1E: "Shiodome",
    0x1F: "Hakozaki",
    0x20: "Hakozaki JCT",
    0x21: "Fukuzumi",
    0x22: "Kiba",
    0x23: "Shiohama",
    0x24: "Eda River",
    0x25: "Tatsumi JCT",
    0x26: "Ariake",
    0x27: "Ariake JCT",
    0x28: "Daiba",
    0x29: "Shibaura JCT",
    0x2A: "Area 13",
    0x2B: "Ooi",
    0x2C: "Ooi JCT",
    0x2D: "South Ooi",
    0x2E: "Tokai JCT",
    0x2F: "Central Airport",
    0x30: "Wagan I-8",
    0x31: "Ukishima",
    0x32: "East Oogijima",
    0x33: "Daikoku JCT",
    0x34: "Daikoku",
    0x35: "Namamugi JCT",
    0x36: "Shioiri",
    0x37: "Asada",
    0x38: "Hamakawasaki",
    0x39: "Daishi",
    0x3A: "Haneda",
    0x3B: "Airport West",
    0x3C: "Showajima JCT",
    0x3D: "Heiwajima",
    0x3E: "Suzugamori",
    0x3F: "Katsuura",
    0x40: "Shibaura",
    0x41: "Hamamachi"
}

// Helper function 
function ContainsKey(dictionary, key_name)
{
    for key in dictionary 
        if(key == key_name) return true
    return false
}

function saveProtection() => !inQuestSystemMenu() && !systemMode()

function winAchievement(title, description, points, index)
{
    offset = index/8
    
    targetBit = index%8
    targetLocation = winsLocationPlusOffset(offset) 
    achievement(title = title,
                description = description,
                points = points,
                trigger = prev(bit(targetBit, targetLocation )) == 0 &&
                          bit(targetBit, targetLocation) == 1 &&  // Just Beat the value 
                          postRaceScreen() == QUEST_MODE_POST_RACE && // Just finished a race
                          questModeDriving() &&
                          inGameDriving() &&
                          !demoMode() &&
                          questRaceWon() // unneeded, but extra safety.
                )
}


function teamAchievements()
{
    for TeamInfo in TeamInformation 
    {
        points = 1
        if( ContainsKey(TeamInfo,"points") )
        {
            points = TeamInfo["Points"]
        }
        winAchievement(title = TeamInfo["TeamName"],
                    description = format("Beat {0} from {1} in Quest Mode", TeamInfo["TeamLeader"], TeamInfo["TeamName"]),
                    points = points,
                    index = TeamInfo["TeamLeaderID"]
                    )
    }
    
}

function wanderersAchievements()
{
    for WandererInfo in Wanderers 
    {
        points = 1
        if( ContainsKey(WandererInfo,"points") )
        {
            points = WandererInfo["Points"]
        }
        winAchievement(title = WandererInfo["WandererName"],
                    description = format("Beat Wanderer {0} in Quest Mode", WandererInfo["WandererName"]),
                    points = points,
                    index = WandererInfo["WandererID"]
                    )
    }
    
}

function eliteAchievements()
{
    for EliteInfo in EliteMembers 
    {
        points = 1
        if( ContainsKey(EliteInfo,"points") )
        {
            points = WandererInfo["Points"]
        }
        winAchievement(title = EliteInfo["EliteName"],
                    description = format("Beat {0} in Quest Mode", EliteInfo["EliteName"]),
                    points = points,
                    index = EliteInfo["EliteID"]
                    )
    }
    
}

teamAchievements()
wanderersAchievements()
eliteAchievements()

// Team in one day. 

function teamInADayAchievement()
{
    // initial trigger is always false
    triggerTeamConditions = always_false()
    // go through each team. 
    for TeamInfo in TeamInformation 
    {
        // Start a previous condition and a current condition. 
        prevCondition = always_true()
        currentCondition = always_true()
        noLossCondition = always_true()
        // cycle through each team member including the first and last.
        for index in range(TeamInfo["TeamLeaderID"],TeamInfo["LastMember"])
        {
            // Calculate target Location(through offset) and bit
            offset = index/8
            targetBit = index%8
            winTargetLocation = winsLocationPlusOffset(offset) 
            lossTargetLocation = lossesLocationPlusOffset(offset)
            // Previous condition anded with delta (prev) bit false. 
            prevCondition = prevCondition && prev(bit(targetBit, winTargetLocation)) == 0
            // current condition and with bit check true. 
            currentCondition = currentCondition && bit(targetBit, winTargetLocation) == 1
            noLossCondition = noLossCondition && bit(targetBit, lossTargetLocation) == 0
        }
        // trigger ored with (hit (once) on previous condition anded with current condition.)
        triggerTeamConditions = triggerTeamConditions || (once(prevCondition) && currentCondition && noLossCondition)
    }

    // Trigger is wrapped in () and then anded with never(!inGameDriving())

    achievement(title = "A Busy Night",
                description = "Beat every single member of a team for the first time, including the leader, in a single night without ever losing or drawing in races against any of them  in Quest Mode",
                points = 5,
                trigger = questMode() &&
                          never(!inGameDriving()) &&
                          (triggerTeamConditions) &&
                          racesWonInNight() >= 1 // Make sure they've won at least one race.  
                )
}

teamInADayAchievement()


achievement(title = "A Long Night",
            description = "Win at least 20 races in a single night and return to the garage in Quest Mode",
            points = 3,
            trigger = questMode() &&
                      previnGameDriving() &&
                      !inGameDriving() &&
                      racesWonInNight() >= 20
            )

achievement(title = "A Perfect Night",
            description = "Win at least 10 races in a single night with out losing or drawing a single race in Quest Mode",
            points = 10,
            trigger = questModeDriving() &&
                      previnGameDriving() &&
                      inGameDriving()  &&
                      measured(racesWonInNight() >= 10 ) &&
                      racesLostInNight() == 0 &&
                      racesDrawnInNight() == 0
            )

function uniqueWinAchievement() 
{
    achievement(title = "A Unique Night",
            description = "Beat 10 unique racers in a single night in Quest Mode",
            points = 10,
            trigger = questMode() &&
                      never(!previnGameDriving()) &&
                      measured(tally_of(range(0,TOTAL_ENEMIES/8), 10, index => prev(bitcount(winsLocationPlusOffset(index))) != bitcount(winsLocationPlusOffset(index))), 
                                when=inGameDriving()) && 
                                racesWonInNight() >= 10 // Found issue where players can reset and get this, so let's confirm they won at least the expected amount. 
            )
}
uniqueWinAchievement()

MAX_UPGRADE_DISTANCE = 1864
MAX_UPGRADE_VALUES = DISTANCE_FACTOR * MAX_UPGRADE_DISTANCE
achievement(title = "Now to build the ultimate car",
            description = "Reach 1864 miles on a car and unlock the ability to buy all the best parts for the car",
            points = 3,
            trigger = inGameDriving()  &&  // Note: can be done in any game mode. 
                      !demoMode() && // This actually does trigger in Demo Mode. (ugh)
                      inGameTripOdometer() >= MAX_UPGRADE_VALUES &&  
                      prev(inGameTripOdometer()) < MAX_UPGRADE_VALUES
            )

achievement(title = "Crank up the Super Eurobeat",
            description = "Drive an AE86 and beat someone on the road in Quest Mode",
            points = 2,
            trigger = questModeDriving() &&
                      inGameDriving() &&  
                      !demoMode() && 
                      drivingAE86() &&
                      trigger_when(postRaceScreen() == QUEST_MODE_POST_RACE && // Just finished a race
                                   questRaceWon() &&
                                   racesWonInNight() == 1)  // I could check previous but there's really no way for someone to "win" a race automatically. 
           )

function CarsToBuyAchievements(title, description, points, numberCarsToUnlock)
{
    targetCarCount = numberCarsToUnlock + INITIAL_CAR_SELECTION
    achievement(title = title,
            description = description,
            points = 10,
            trigger = inGameDriving() && // Probably will be questMode, but let's not make an assumption.
                      !demoMode() && 
                      sum_of(range(0,TOTAL_CARS_TO_BUY/8), index => bitcount(carUnlockArrayPlusOffset(index))) >= targetCarCount&&
                      sum_of(range(0,TOTAL_CARS_TO_BUY/8), index => prev(bitcount(carUnlockArrayPlusOffset(index)))) < targetCarCount
            )
}

CarsToBuyAchievements(title = "Neighborhood Lot", 
                      description = "Be able to buy ten percent of the locked cars.",
                      points = 2,
                      numberCarsToUnlock = TENTH_OF_CARS_TO_UNLOCK
                      )

CarsToBuyAchievements(title = "CraigsList", 
                      description = "Be able to buy twenty five percent of the locked cars.",
                      points = 3,
                      numberCarsToUnlock = QUARTER_OF_CARS_TO_UNLOCK
                      )

CarsToBuyAchievements(title = "Dealership", 
                      description = "Be able to buy fifty percent of the locked cars.",
                      points = 5,
                      numberCarsToUnlock = QUARTER_OF_CARS_TO_UNLOCK * 2
                      )

CarsToBuyAchievements(title = "Online Auto Auction", 
                      description = "Be able to buy seventy five percent of the locked cars.",
                      points = 10,
                      numberCarsToUnlock = QUARTER_OF_CARS_TO_UNLOCK * 3
                      )

achievement(title = "You'll get them next time",
            description = "Earn your first Draw in Quest Mode",
            points = 2,
            trigger = questModeDriving() &&
                      inGameDriving() &&
                      racesDrawnInNight() == 1  // I could check previous but there's really no way for someone to "win" a race automatically. 
           )


achievement( title = "No fuzzy dice?",
             description = "Get a mirror ornament for your car",
             points = 1,
             trigger = inGameDriving() &&
                       !demoMode() && 
                       hasMirrorHanger()
            )

achievement( title = "Hey Big Spender",
             description = "Spend over $100,000 on a single car in the Car Shop in Quest Mode",
             points = 3,
             trigger = questMode() &&
                       !inGameDriving() &&
                       inCarShop() &&
                       prev(totalMoneyQuestMode()) - totalMoneyQuestMode() >= 100000/10  // money is record in 10 dollar bills. 
            )

function TimeTrialAchievement(title, description, points, course, carClass, minutes, seconds = 0, milliseconds = 0)
{
    trigger = inGameDriving() &&
              timeAttackModeDriving() &&
              timetrialCourseIndex() == course &&
              trigger_when( postRaceScreen() == TIME_TRIAL_TIMING ) &&
              timeTrialTime() <= (((minutes * 60) + seconds ) * 1000) + milliseconds &&
              inGameCarClass() == carClass
    
    
    achievement( title = title,
             description = description,
             points = points, 
             trigger = trigger
             )
}


TimeTrialAchievement( title = "Kanjyo Cruiser Challenge",
                     description = "Finish the Kanda Bridge with an class C car in 4 minutes and 10 seconds in Time Trial Mode",
                     points = 5, 
                     course = KANDA_BRIDGE_CCW, 
                     carClass = CLASS_C,
                     minutes = 4,
                     seconds = 10
                    )

TimeTrialAchievement( title = "Shinkanjyo Speedrun Supremacy",
                      description = "Finish the Ariake course(Shinkanjyo CCW) with an class B car in 4 minutes and 25 seconds in Time Trial Mode",
                      points = 5, 
                      course = ARIAKE_CCW, 
                      carClass = CLASS_B,
                      minutes = 4,
                      seconds = 25
                    )

TimeTrialAchievement( title = "Area 13 to Daikoku Dash",
                      description = "Finish the Area 13 (Wangan Southbound) with an class B car in 5 Minutes and 20 seconds in Time Trial Mode",
                      points = 5, 
                      course = AREA_13_SPRINT, 
                      carClass = CLASS_B,
                      minutes = 5,
                      seconds = 20
                    )
                    

TimeTrialAchievement( title = "Shioiri Sprint to Suzugamori",
                      description = "Finish the Shioiri(Haneda Northbound) with an class A car in 2 Minutes and 30 seconds in Time Trial Mode",
                      points = 5, 
                      course = SHIOIRI_SPRINT, 
                      carClass = CLASS_A,
                      minutes = 2,
                      seconds = 30
                    )

TimeTrialAchievement( title = "Wangan Lightning Legend",
                      description = "Finish the Kanda Bridge (C-1 CW) with an class A car in 15 Minutesin Time Trial Mode",
                      points = 5, 
                      course = KANDA_C1_CW, 
                      carClass = CLASS_A,
                      minutes = 15
                )

TimeTrialAchievement( title = "Oval Overdrive",
                      description = "Finish the Oval with an class A car in 1 minute and 10 seconds in Time Trial Mode",
                      points = 5, 
                      course = OVAL, 
                      carClass = CLASS_A,
                      minutes = 1,
                      seconds = 10
                    )

function QuickRaceAchievement( title, description, points, winCount)
{
    achievement( title = title,
             description = description,
             points = points, 
             trigger = inGameDriving() &&
                       quickRaceModeDriving() &&
                       quickRaceRound() == (winCount - 1) &&
                       quickRaceWon() && 
                       postRaceScreen() == QUICK_RACE_MODE_POST_RACE

             )
}

QuickRaceAchievement( title = "More Like Survival Mode", 
                      description = "Beat round 10 in Quick Race mode.",
                      points = 3,
                      winCount = 10)
QuickRaceAchievement( title = "Quarter Century Champion", 
                      description = "Beat round 25 in Quick Race mode.",
                      points = 5,
                      winCount = 25)
QuickRaceAchievement( title = "Halfway There", 
                      description = "Beat round 50 in Quick Race mode.",
                      points = 10,
                      winCount = 50)
QuickRaceAchievement( title = "Are We There Yet?", 
                      description = "Beat round 75 in Quick Race mode.",
                      points = 10,
                      winCount = 75)
QuickRaceAchievement( title = "Centurion Conqueror", 
                      description = "Beat round 100 in Quick Race mode.",
                      points = 25,
                      winCount = 100)

achievement(title = "Whose going to watch that?",
            description = "Watch the Fast and the Furious trailer.",
            points = 1,
            trigger = dvdExtrasMode() &&
                      movieIsPlaying() &&
                      whichMoviePlaying() == FAST_AND_FURIOUS
)

TimeTrialCourseLookup =
{
    KANDA_BRIDGE_CCW: "Kanda Bridge(Kanjyo Inner)",
    KANDA_BRIDGE_CW: "Kanda Bridge(Kanjyo Outer)",
    ARIAKE_CCW: "Ariake(Shinkanjyo CCW)",
    ARIAKE_CW: "Ariake(Shinkanjyo CW)",
    DAIKOKU_SPRINT: "Daikoku Port (Wangan North bound)",
    AREA_13_SPRINT: "Area 13 (Wangan South bound)",
    SUZUGAMORI_SPRINT: "Suzugamori (Haneda South bound)",
    SHIOIRI_SPRINT: "Shioiri (Haneda North bound)",
    KANDA_C1_CCW: "Kanda Bridge (C-1 CCW)",
    KANDA_C1_CW: "Kanda Bridge (C-1 CW)",
    ZERO_TO_400M: "0-400m on Oval",
    OVAL: "Oval"
}

function timeTrialLeaderboard( title, description, courseId, carClass) 
{
    leaderboard(title = title,
                description = description,
                start = inGameDriving() &&
                        timeAttackModeDriving() &&
                        timetrialCourseIndex() == courseId &&
                        postRaceScreen() == TIME_TRIAL_TIMING &&
                        inGameCarClass() == carClass,
                cancel = always_false(),
                submit = always_true(),
                value = timeTrialTime()/10,
                format = "MILLISECS", // This is mislabeled, it's centiseconds
                lower_is_better = true
                )
}

function timeTrialLeaderboardCourseHelper(courseId)
{
    courseName = TimeTrialCourseLookup[courseId]
    timeTrialLeaderboard( title = format("{0} Class A", courseName ),
                          description = format("Register the fastest time on {0} with a Class A car in Time Trial mode", courseName),
                          courseId = courseId,
                          carClass = CLASS_A
                        )
    timeTrialLeaderboard( title = format("{0} Class B", courseName ),
                          description = format("Register the fastest time on {0} with a Class B car in Time Trial mode", courseName),
                          courseId = courseId,
                          carClass = CLASS_B
                        )
    timeTrialLeaderboard( title = format("{0} Class C", courseName ),
                          description = format("Register the fastest time on {0} with a Class C car in Time Trial mode", courseName),
                          courseId = courseId,
                          carClass = CLASS_C
                        )
}

for key in TimeTrialCourseLookup
{
    timeTrialLeaderboardCourseHelper(key)
}

// Rich presence
// If watching Fast and Furious.  State they are getting HYPED!
rich_presence_conditional_display(dvdExtrasMode() &&
                                  movieIsPlaying() &&
                                  whichMoviePlaying() == FAST_AND_FURIOUS, 
                                  "is getting hyped watching the greatest trailer of all time.")

// If not driving. State which mode they are in. 
rich_presence_conditional_display(!inGameDriving(), 
                                  "is in the {0} menus",
                                  rich_presence_lookup("ModeLookup", currentGameMode(), GameModeLookup)
                                  ) 

rich_presence_conditional_display(inGameDriving() && demoMode(), 
                                  "is watching the demos"
                                  ) 

// If Driving in Quest Mode.  State where they are cruising and which car
rich_presence_conditional_display(inGameDriving() && questModeDriving(), 
                                  "is driving a {0} around {1} in Quest mode",
                                  rich_presence_lookup("CarLookup", inGameCarIndex(), CarLookup),
                                  rich_presence_lookup("HighWayLocationLookup", highwayLocationIndex(), HighwayLocationLookup)
                                  ) 

// If driving in Time Trial.  State Which course they are driving and which car
rich_presence_conditional_display(inGameDriving() && timeAttackModeDriving(), 
                                  "is running Time Trials for {0} while driving {1}",
                                  rich_presence_lookup("TimeTrialCourseLookup", timetrialCourseIndex(), TimeTrialCourseLookup),
                                  rich_presence_lookup("CarLookup", inGameCarIndex(), CarLookup)
                                  ) 


// If Driving Quick Race.  State which round, which area, and which car
rich_presence_conditional_display(inGameDriving() && quickRaceModeDriving(), 
                                  "is in round {0} of Quick Race while driving {1} around {2}",
                                  rich_presence_value("Number", quickRaceRound() +1),
                                  rich_presence_lookup("CarLookup", inGameCarIndex(), CarLookup),
                                  rich_presence_lookup("HighWayLocationLookup", highwayLocationIndex(), HighwayLocationLookup)
                                  ) 

// If driving Free Run, say car and where
rich_presence_conditional_display(inGameDriving() && freeRunModeDriving(), 
                                  "is just practicing in Free Run while driving {0} around {1}",
                                  rich_presence_lookup("CarLookup", inGameCarIndex(), CarLookup),
                                  rich_presence_lookup("HighWayLocationLookup", highwayLocationIndex(), HighwayLocationLookup)
                                  ) 

// If driving Versus, just say that. 
rich_presence_conditional_display(inGameDriving() && versusModeDriving(), 
                                  "is playing Versus with friends"
                                  ) 
rich_presence_display("Playing Tokyo Xtreme Racer..")
// achievements

// On Hold 
// Break a certain speed. 
// 250 KPH = 155something MPH
//  Need to calculate this, but just grab max speed. 

// For the moment, I'm not comfortable with how the game presents speeds.  I could find values that work for this but I would not be able to be very confident that it won't break. 

// 200 + MPH ticket. 
// Expensive ticket

// Full Garage 
// Killed because it's repetative as shit, but also not really fun or interesting. 
//achievement( title = "Full Garage",
//             description = "Own 50 cars in Quest Mode",
//             points = 2, 
//             trigger = questMode() &&
////                       classACarsOwned() + classBCarsOwned() + classCCarsOwned() == 50 &&
//                       prev(classACarsOwned()) + prev(classBCarsOwned()) + prev(classCCarsOwned()) == 49 &&
//                       saveProtection()
//           )
//

// Probably hard to do, hard to get. 


/////////////////
// NEEDS 
////////////////


// Changing instruction 00189218 to subu s1,s1,v1  is easy mode. 


// Need to find what road I'm on. 

// Determine if you won or lost in QR

// Subset idea. No losses. 